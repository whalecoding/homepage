/*! mantle-gl v1.0.2 (2021-07-22 12:38:21) / Copyright(c) 2021, NAVER Corp. */
!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=12)}([function(t,e,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(t,e,n,o){void 0===o&&(o=n),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,o){void 0===o&&(o=n),t[o]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e});this&&this.__importStar;Object.defineProperty(e,"__esModule",{value:!0}),e.EPSG3857=e.Event=e.KVOArray=e.KVO=e.LatLngBounds=e.PointBounds=e.LatLng=e.Point=e.Size=e.DOMEvent=e.DOM=e.Position=e.Mantle=void 0,window.N=null;var r=window.naver.maps?window.naver.maps.__export():null;r.glSupported=function(){return!1},e.Mantle=r,e.Position=r.Position,e.DOM=r.DOM,e.DOMEvent=r.DOMEvent,e.Size=r.Size,e.Point=r.Point,e.LatLng=r.LatLng,e.PointBounds=r.PointBounds,e.LatLngBounds=r.LatLngBounds,e.KVO=r.KVO,e.KVOArray=r.KVOArray,e.Event=r.Event,e.EPSG3857=r.EPSG3857},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OVERLAY_BUBBLING_EVENTS=e.OVERLAY_BUBBLING_EVENTS_MAPPER=e.MapboxSource=e.OVERLAY_TYPE_ORDER_SEQUENCE=e.STYLE_MAP_OVERLAY_TYPE=e.LAYER_TYPE=e.MAP_TYPE=e.TILE_TYPES=e.STYLE_TILE_TYPE_SATELLITE=e.STYLE_TILE_TYPE_TERRAIN=e.STYLE_TILE_TYPE_BASIC=e.ZOOM_DIFF=e.RENDER_MODE_GL=e.RENDER_MODE_2D=e.MAX_TILT=e.MIN_TILT=e.FEATURE_COLLECTION=e.FEATURE=e.GEOMETRY_COLLECTION=e.MULTI_POLYGON=e.MULTI_LINE_STRING=e.MULTI_POINT=e.POLYGON=e.LINE_STRING=e.POINT=e.VENDOR_NAVER=e.SUBMODULES_INIT_EVENT=e.STOP_DISPATCH_BUILTIN_EVENT=e.BEGIN_DISPATCH_BUILTIN_EVENT=e.MARKER_WRAPPER_BORDER_SIZE=e.DISABLE_MAX_WIDTH_HEIGHT_STYLE=e.ZERO_ABSOLUTE_VISIBLE_STYLE=e.ZERO_ABSOLUTE_STYLE=e.ZERO_STYLE=e.DEFAULT_STYLE_FONT_FAMILY=e.BLANK_IMAGE=e.STATIC_IMG_V3=e.STATIC_IMG=e.DEVICE_PIXEL_RATIO=e.IS_DEBUG_MODE=e.SSL=e.LOCATION_URL=e.LOCATION_HOST=e.DRAG_THRESHOLD=e.FOCUSABLE_ELEMENTS=e.OVERLAY_DOMEVENTS=e.FORCED=e.POSITION=e.ANIMATION=e.SYMBOL_PATH=e.CUSTOM_TILE=e.IMAGE_TILE=e.KEYCODE_DOWN=e.KEYCODE_RIGHT=e.KEYCODE_UP=e.KEYCODE_LEFT=e.KEYCODE_HOME=e.KEYCODE_END=e.KEYCODE_PGDN=e.KEYCODE_PGUP=e.STYLE=void 0;var o=n(0);e.STYLE={LARGE:1,SMALL:2,BUTTON:1,DROPDOWN:2},e.KEYCODE_PGUP=33,e.KEYCODE_PGDN=34,e.KEYCODE_END=35,e.KEYCODE_HOME=36,e.KEYCODE_LEFT=37,e.KEYCODE_UP=38,e.KEYCODE_RIGHT=39,e.KEYCODE_DOWN=40,e.IMAGE_TILE=1,e.CUSTOM_TILE=2,e.SYMBOL_PATH={BACKWARD_CLOSED_ARROW:1,BACKWARD_OPEN_ARROW:2,CIRCLE:3,FORWARD_CLOSED_ARROW:4,FORWARD_OPEN_ARROW:5},e.ANIMATION={BOUNCE:1,DROP:2},e.POSITION={CENTER:0,TOP_LEFT:1,TOP_CENTER:2,TOP_RIGHT:3,LEFT_CENTER:4,LEFT_TOP:5,LEFT_BOTTOM:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12},e.FORCED="FORCED",e.OVERLAY_DOMEVENTS=["click","dblclick","mousedown","mouseup","mouseenter","mouseleave"],e.FOCUSABLE_ELEMENTS=["A","AREA","BUTTON","EMBED","INPUT","OBJECT","SELECT","TEXTAREA"],e.DRAG_THRESHOLD=4,e.LOCATION_HOST=(window.location.host+"").split(":")[0],e.LOCATION_URL=window.location.href+"",e.SSL=0===window.location.protocol.indexOf("https"),e.IS_DEBUG_MODE=e.LOCATION_URL.indexOf("mantle_debug=true")>-1,e.DEVICE_PIXEL_RATIO=(window.devicePixelRatio||1)>1?2:1,e.STATIC_IMG=e.SSL?"https://ssl.pstatic.net/static":"http://static.naver.net",e.STATIC_IMG_V3=e.STATIC_IMG+"/maps/mantle/"+e.DEVICE_PIXEL_RATIO+"x",e.BLANK_IMAGE=e.STATIC_IMG_V3+"/dot.gif",e.DEFAULT_STYLE_FONT_FAMILY="Helvetica,AppleSDGothicNeo-Light,nanumgothic,NanumGothic,'\ub098\ub214\uace0\ub515',Dotum,'\ub3cb\uc6c0',sans-serif",e.ZERO_STYLE="margin:0;padding:0;border:solid 0 transparent;display:block;box-sizing:content-box !important;",e.ZERO_ABSOLUTE_STYLE="position:absolute;top:0;left:0;z-index:0;"+e.ZERO_STYLE,e.ZERO_ABSOLUTE_VISIBLE_STYLE=e.ZERO_ABSOLUTE_STYLE+"width:0;height:0;overflow:visible;",e.DISABLE_MAX_WIDTH_HEIGHT_STYLE="max-width:none !important;max-height:none !important;min-width:0 !important;min-height:0 !important;",o.Mantle.MIN_API_CONTROL_ZINDEX=1,e.MARKER_WRAPPER_BORDER_SIZE=1,e.BEGIN_DISPATCH_BUILTIN_EVENT="__BEGIN_DISPATCH__",e.STOP_DISPATCH_BUILTIN_EVENT="__STOP_DISPATCH__",e.SUBMODULES_INIT_EVENT="__sbinit",e.VENDOR_NAVER="\xa9 NAVER Corp.",e.POINT="Point",e.LINE_STRING="LineString",e.POLYGON="Polygon",e.MULTI_POINT="MultiPoint",e.MULTI_LINE_STRING="MultiLineString",e.MULTI_POLYGON="MultiPolygon",e.GEOMETRY_COLLECTION="GeometryCollection",e.FEATURE="Feature",e.FEATURE_COLLECTION="FeatureCollection",e.MIN_TILT=0,e.MAX_TILT=60,e.RENDER_MODE_2D=1,e.RENDER_MODE_GL=2,e.ZOOM_DIFF=1,e.STYLE_TILE_TYPE_BASIC="basic",e.STYLE_TILE_TYPE_TERRAIN="terrain",e.STYLE_TILE_TYPE_SATELLITE="satellite",e.TILE_TYPES=[e.STYLE_TILE_TYPE_BASIC,e.STYLE_TILE_TYPE_TERRAIN,e.STYLE_TILE_TYPE_SATELLITE],e.MAP_TYPE={NORMAL:"normal",TERRAIN:"terrain",SATELLITE:"satellite",HYBRID:"hybrid"},e.LAYER_TYPE={CCTV:"cctv",BICYCLE:"bicycle",STREET:"street",MOUNTAIN:"mountain",CADASTRAL:"cadastral",TRAFFIC:"traffic",INDOOR_GND:"indoor_gnd",INDOOR_TILE_MAP:"indoor_tile_map",INDOOR_POI:"indoor_poi"},e.STYLE_MAP_OVERLAY_TYPE={BACKGROUND:"bg",BACKGROUND_DETAIL:"ol",POI_KOREAN:"lko",POI_ENGLISH:"len",POI_CHINESE:"lzh",POI_JAPANESE:"lja",BYCYCLE:"br",PANORAMA:"pr",CADASTRAL:"lp",HIKING_TRAIL:"ar",CTT:"ctt",SUBWAY:"sw",TRANSIT:"ts",BUS_STATION:"bs",INDOOR:"ib",CCTV:"cctv"},e.OVERLAY_TYPE_ORDER_SEQUENCE=["bg","ol","sw","bs","ts","ps","pr","br","ar","rtrl","rtrd","rtrg","lp","ctt","cctv","lko","len","lzh","lja","ib"],function(t){t.POI="poi4osm",t.BUS="bus",t.INDOOR_GND="indoorgnd",t.INDOOR_POI="indoor_poi"}(e.MapboxSource||(e.MapboxSource={})),e.OVERLAY_BUBBLING_EVENTS_MAPPER={click:"overlay_click",dblclick:"overlay_dblclick",rightclick:"overlay_rightclick"},e.OVERLAY_BUBBLING_EVENTS=Object.keys(e.OVERLAY_BUBBLING_EVENTS_MAPPER)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBounds=e.composePath=e.mousePos=e.getDistance=e.getHorizontalDegree=e.isMapboxStyle=e.toMapboxAnimationOptions=e.toMapboxCameraOptions=e.isAnimationOptions=e.isCameraOptions=e.getCircularCoordinates=e.switchParts=e.mixin=void 0;var o=n(0);e.mixin=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Object.getOwnPropertyNames)for(var o=0,i=e;o<i.length;o++)for(var r=i[o],a=0,s=Object.getOwnPropertyNames(r.prototype);a<s.length;a++){var p=s[a];t.prototype[p]||(t.prototype[p]=r.prototype[p])}return t},e.switchParts=function(t,e,n,o){void 0===o&&(o="");for(var i=0,r=n;i<r.length;i++){var a=r[i],s=a+o;t[a]=e[s]}},e.getCircularCoordinates=function(t,e,n,o){void 0===o&&(o=64);for(var i,r,a,s=[],p=n/110574,l=e/(111320*Math.cos(t.y*Math.PI/180)),u=0;u<o;u++)i=u/o*(2*Math.PI),a=p*Math.sin(i),r=l*Math.cos(i),s.push([t.lng()+r,t.lat()+a]);return s.push(s[0]),s},e.isCameraOptions=function(t){return!(Array.isArray(t)||t instanceof o.Mantle.Point||t instanceof o.Mantle.PointBounds)&&("center"in t||"zoom"in t||"around"in t||"bearing"in t||"rotation"in t||"pitch"in t||"tilt"in t)},e.isAnimationOptions=function(t){return"duration"in t||"easing"in t||"offset"in t||"animate"in t},e.toMapboxCameraOptions=function(t){return t.center&&t.center instanceof o.Mantle.LatLng&&(t.center=t.center.toLngLat()),t.around&&t.around instanceof o.Mantle.LatLng&&(t.around=t.around.toLngLat()),"tilt"in t&&(t.pitch=t.tilt),"rotation"in t&&(t.bearing=t.rotation),t},e.toMapboxAnimationOptions=function(t){var e=t.easing;if(e&&o.Mantle.isString(e))switch(e){case"linear":t.easing=function(t){return t};break;case"easeInCubic":t.easing=function(t){return t*t*t};break;case"easeOutCubic":t.easing=function(t){return--t*t*t+1};break;default:delete t.easing}return t},e.isMapboxStyle=function(t){return!!o.Mantle.isString(t)||"object"==typeof t&&"source"in t&&"layers"in t},e.getHorizontalDegree=function(t,e){var n=t.x,i=e.y,r=e.x-n,a=e.y-i,s=e.x-t.x,p=e.y-t.y,l=Math.atan2(r*p-a*s,r*s+a*p);return o.Mantle.Math.fromRadiansToDegrees(l)},e.getDistance=function(t,e){var n=Math.PI/180,o=t.lat()*n,i=e.lat()*n,r=Math.sin(o)*Math.sin(i)+Math.cos(o)*Math.cos(i)*Math.cos((e.lng()-t.lng())*n);return 6371e3*Math.acos(Math.min(r,1))},e.mousePos=function(t,e){var n=t.getBoundingClientRect(),i=e.touches?e.touches[0]:e;return new o.Point(i.clientX-n.left-t.clientLeft,i.clientY-n.top-t.clientTop)},o.Mantle.DOM.mousePos=e.mousePos,e.composePath=function(t,e){var n=t;for(var o in e)n=n.replace("{"+o+"}",e[o]);return n},e.getBounds=function(t){for(var e=1/0,n=1/0,o=-1/0,i=-1/0,r=0,a=t;r<a.length;r++){var s=a[r];e=Math.min(e,s[0]),n=Math.min(n,s[1]),o=Math.max(o,s[0]),i=Math.max(i,s[1])}return[e,n,o,i]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FileLoader=void 0;var o=function(){function t(){}return t.loadImage=function(t){return new Promise(function(e,n){var o=new Image;o.crossOrigin="Anonymous",o.onload=function(t){e(o)},o.onerror=function(t){n(t)},o.src=t})},t.loadArraybuffer=function(t){return new Promise(function(e,n){var o=new XMLHttpRequest;o.open("GET",t,!0),o.responseType="arraybuffer",o.withCredentials=!1,o.onerror=function(t){return n("arraybuffer loading fail.")},o.onload=function(t){0!==o.response.byteLength||200!==o.status?o.status>=200&&o.status<300&&o.response?e(o.response):n(o.statusText):e(o.response)},o.send()})},t.loadJSON=function(t,e){return new Promise(function(n,o){var i=new XMLHttpRequest;i.open("GET",t,!0),i.setRequestHeader("Accept","application/json"),i.onerror=function(t){return o("JSON loading fail.")},i.onload=function(r){if(i.status>=200&&i.status<300&&i.response){var a=void 0;try{a=JSON.parse(i.response)}catch(t){return void o("JSON parsing error.")}n(a),e&&e(t,a)}else o(i.statusText)},i.send()})},t}();e.FileLoader=o},function(t,e,n){"use strict";var o,i;Object.defineProperty(e,"__esModule",{value:!0}),e.ServerConfig=e.PathType=e.ServerPhase=void 0,function(t){t.DEV="DEV",t.TEST="TEST",t.STG="STG",t.REAL="REAL"}(o=e.ServerPhase||(e.ServerPhase={})),function(t){t.EXPERIMENT="experiment",t.DEVELOPMENT="development",t.PRODUCTION="prod"}(i||(i={})),function(t){t.TILE_IMAGE="TILE_IMAGE",t.TILE_PICKER="TILE_PICKER",t.INDOOR_MASTER="INDOOR_MASTER",t.INDOOR_GROUND_TILE="INDOOR_GROUND_TILE"}(e.PathType||(e.PathType={}));var r={DEV:{TILE_IMAGE:{source:"https://dev-nrb.map.naver.com/styles"},TILE_PICKER:{source:"https://dev-nrb.map.naver.com/picker/{type}/{tileVersion}/{z}/{x}/{y}.{format}"},INDOOR_MASTER:{source:"https://apis.naver.com/indoor/tindoor/meta/type/{format}/layer/indoor_bg_gnd_a"},INDOOR_GROUND_TILE:{source:"https://map.pstatic.net/nrb/styles/basic/{z}/{x}/{y}"}},TEST:{TILE_IMAGE:{source:"https://test-nrb.map.naver.com/styles"},TILE_PICKER:{source:"https://test-nrb.map.naver.com/picker/{type}/{tileVersion}/{z}/{x}/{y}.{format}"},INDOOR_MASTER:{source:"https://apis.naver.com/indoor/tindoor/meta/type/{format}/layer/indoor_bg_gnd_a"},INDOOR_GROUND_TILE:{source:"https://map.pstatic.net/nrb/styles/basic/{z}/{x}/{y}"}},STG:{TILE_IMAGE:{source:"https://map.pstatic.net/nrb/styles"},TILE_PICKER:{source:"https://map.pstatic.net/nrb/picker/{type}/{tileVersion}/{z}/{x}/{y}.{format}"},INDOOR_MASTER:{source:"https://apis.naver.com/indoor/indoor/meta/type/{format}/layer/indoor_bg_gnd_a"},INDOOR_GROUND_TILE:{source:"https://map.pstatic.net/nrb/styles/basic/{z}/{x}/{y}"}},REAL:{TILE_IMAGE:{source:"https://map.pstatic.net/nrb/styles"},TILE_PICKER:{source:"https://map.pstatic.net/nrb/picker/{type}/{tileVersion}/{z}/{x}/{y}.{format}"},INDOOR_MASTER:{source:"https://apis.naver.com/indoor/indoor/meta/type/{format}/layer/indoor_bg_gnd_a"},INDOOR_GROUND_TILE:{source:"https://map.pstatic.net/nrb/styles/basic/{z}/{x}/{y}"}}},a=function(){function t(){var t=this.getNodeEnv(),e=this.createServerPhaseBy(t);this.init(e)}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.createServerPhaseBy=function(t){return t===i.DEVELOPMENT?o.DEV:0===t.indexOf("internal")?t.replace("internal-","").toUpperCase():o.REAL},t.prototype.init=function(t){void 0!==t&&this.setServerPhase(t)},t.prototype.getNodeEnv=function(){return i.PRODUCTION},t.setServerPhase=function(t){this.getInstance().serverPhase=t},t.getPath=function(t,e){return this.getInstance().getPath(this.getInstance().serverPhase,t,e)},t.getTestPath=function(t){return this.getInstance().getTestPath(this.getInstance().serverPhase,t)},t.prototype.getPath=function(t,e,n){var o=r[t];return o?o[e]&&o[e].source?this.composePath(o[e].source,n):o.extends?this.getPath(o.extends,e,n):"":""},t.prototype.getTestPath=function(t,e){var n=r[t];return n?n[e]&&n[e].source&&n[e].test?n[e].ignoreTest?"":this.composePath(n[e].source,n[e].test):n.extends?this.getTestPath(n.extends,e):"":""},t.prototype.composePath=function(t,e){var n=t;for(var o in e)n=n.replace("{"+o+"}",e[o]);return n=n.replace("{cache}",""+Math.random())},t.prototype.setServerPhase=function(t){this.serverPhase=t},t}();e.ServerConfig=a},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.NaverVectorMapTypeOptions=void 0;var a=n(0),s=n(1),p=n(6),l=n(3),u={title:"NAVER",link:"https://navercorp.com"},c={title:"OpenStreetMap",bounds:a.Mantle.LatLngBounds(a.Mantle.LatLng(38.72384708044177,132.43015866445896),a.Mantle.LatLng(32.006017049418105,122.77804853762284)),link:"http://www.openstreetmap.org/copyright",exclude:!0},h={"world-vt":[{title:"OpenStreetMap",link:"http://www.openstreetmap.org/copyright"},{title:"Natural Earth",link:"http://www.naturalearthdata.com/"}],"normal-vt":[u,c],"satellite-vt":[u,c,{title:"SPOT"},{title:"\uc778\ucc9c\uad11\uc5ed\uc2dc",bounds:a.Mantle.LatLngBounds(a.Mantle.LatLng(36.915887,125.690716),a.Mantle.LatLng(37.687529,126.853252))},{title:"\uad6d\ud1a0\uc9c0\ub9ac\uc815\ubcf4\uc6d0",bounds:[a.Mantle.LatLngBounds(a.Mantle.LatLng(36.9604682,126.7654746),a.Mantle.LatLng(38.1834428,127.8062689)),a.Mantle.LatLngBounds(a.Mantle.LatLng(33.1940984,126.1631646),a.Mantle.LatLng(33.5666617,126.9448023)),a.Mantle.LatLngBounds(a.Mantle.LatLng(34.2894075,126.1667903),a.Mantle.LatLng(36.157058,127.916409)),a.Mantle.LatLngBounds(a.Mantle.LatLng(37.0338716,127.1017059),a.Mantle.LatLng(38.6097027,129.4009515)),a.Mantle.LatLngBounds(a.Mantle.LatLng(34.7636795,127.5739401),a.Mantle.LatLng(37.1422076,129.6170151)),a.Mantle.LatLngBounds(a.Mantle.LatLng(37.2844933,130.6524052),a.Mantle.LatLng(37.6950155,131.0788897)),a.Mantle.LatLngBounds(a.Mantle.LatLng(35.9625217,125.5567761),a.Mantle.LatLng(37.2537581,128.6557701))]}],"traffic-vt":[{title:"\uad6d\ud1a0\uad50\ud1b5\ubd80"},{title:"\uacbd\ucc30\uccad (UTIS)"}],"cadastral-vt":[{title:"\ub2e4\uc6b8\uc9c0\uc624\uc778\ud3ec"}],cctv:[{title:"\uc11c\uc6b8\uc2dc\uc124\uacf5\ub2e8"},{title:"\uad6d\ud1a0\uad50\ud1b5\ubd80"},{title:"\uacbd\uae30\ub3c4\uad50\ud1b5\uc815\ubcf4\uc13c\ud130"}]},d=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n,o=[],i=0,r=t.length;i<r;i++)o[i]=t[i];return(n=a.Mantle.extend.apply(null,o))&&(n.provider=h[n.uid.split(":")[1]]),new p.VectorMapType(n.styles,new y(n))},f=function(t,e,n){var o=[],i=[],p=function(t){for(var e=null,o=n.length,i=0;i<o;i+=1)if(n[i].source===t){e=n[i];break}return e};a.Mantle.forEach(Object.keys(e),function(t){e[t]&&0!==e[t].length&&i.push.apply(i,e[t])});var l=p("tilemap_basic"),u=p("tilemap_satellite"),c=p("tilemap_satellite_overlay"),h=p("tilemap_terrain");switch(t){case s.MAP_TYPE.NORMAL:l.layout.visibility="visible";break;case s.MAP_TYPE.TERRAIN:h.layout.visibility="visible";break;case s.MAP_TYPE.SATELLITE:u.layout.visibility="visible";break;case s.MAP_TYPE.HYBRID:c.layout.visibility="visible"}return a.Mantle.forEach(n,function(t){var n=t.metadata,a=t.source;(function(t){for(var e=!1,n=i.length,o=0;o<n;o+=1)if(i[o]===t){e=!0;break}return e})(n.group)&&(e.poi&&e.poi.indexOf(t.metadata.group)>=0&&(t.layout.visibility="visible"),a===s.MapboxSource.BUS&&(t.layout.visibility="visible"),t.id.indexOf("\uc2dc\uac01\ub2e8\uc11c_type")>=0&&"fill"===t.type&&(t.paint=r(r({},t.paint),{"fill-color":["case",["boolean",["feature-state","hover"],!1],"#8353b4","#ebe4f3"]})),o.push(t))}),o},y=function(t){function e(e){var n=t.call(this,e)||this;return n.projection=a.Mantle.EPSG3857,n}return i(e,t),e.loadStyles=function(){var t=this;return l.FileLoader.loadJSON("http://catalog.map.naver.com/share/gist/0438086e-0f15-472f-8820-14616056b51e").then(function(e){var n=e.metadata,o=e.sources,i=e.layers,a=n["map-types"],p=a.basic,l=a.satellite,u=a.satellite_overlay,c=a.terrain;o.indoorgnd.promoteId="id";var h=r(r({},e),{name:s.MAP_TYPE.NORMAL,layers:f(s.MAP_TYPE.NORMAL,p.categories,i)}),d=r(r({},e),{name:s.MAP_TYPE.TERRAIN,layers:f(s.MAP_TYPE.TERRAIN,c.categories,i)}),y=r(r({},e),{name:s.MAP_TYPE.SATELLITE,layers:f(s.MAP_TYPE.SATELLITE,l.categories,i)}),_=r(r({},e),{name:s.MAP_TYPE.HYBRID,layers:f(s.MAP_TYPE.HYBRID,u.categories,i)});t.MAP_STYLES={NORMAL:h,TERRAIN:d,SATELLITE:y,HYBRID:_}})},e.getMapTypes=function(t){var n=new a.Mantle.MapTypeRegistry({normal:e.getNormalMap(t),terrain:e.getTerrainMap(t),satellite:e.getSatelliteMap(t),hybrid:e.getHybridMap(t)});return n.VENDOR=s.VENDOR_NAVER,n.uid="naver:vectormap:default",n},e.getNormalMap=function(t){return d({uid:"naver:normal-vt",name:"\uc77c\ubc18",styles:e.MAP_STYLES.NORMAL},t)},e.getTerrainMap=function(t){return d({uid:"naver:normal:terrain-vt",name:"\uc9c0\ud615\ub3c4",styles:e.MAP_STYLES.TERRAIN},t)},e.getSatelliteMap=function(t){return d({uid:"naver:satellite-vt",name:"\uc704\uc131",styles:e.MAP_STYLES.SATELLITE},t)},e.getHybridMap=function(t){return d({uid:"naver:satellite:hybrid-vt",name:"\uacb9\uccd0\ubcf4\uae30",styles:e.MAP_STYLES.HYBRID},t)},e.MAP_STYLES={},e}(a.Mantle.NaverStyleMapTypeOptions);e.NaverVectorMapTypeOptions=y,a.Mantle.NaverVectorMapTypeOptions=y},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.VectorMapType=void 0;var r=n(0),a=function(t){function e(e,n){var o=t.call(this,n)||this;return o._setMapTypeStyle(e),o}return i(e,t),e.prototype.setMapTypeOptions=function(t){var e=t.tileSize||new r.Mantle.Size(256,256);r.Mantle.isNumber(e)&&(e=new r.Mantle.Size(e,e)),this.tileSize=e,this.minZoom=(r.Mantle.isDefined(t.minZoom)?t.minZoom:t.maxZoom)||0,this.maxZoom=t.maxZoom||0,this.name=t.name||"unknown",this.projection=t.projection||r.Mantle.EmptyProjection,this.provider=t.provider||void 0,this.vendor=t.vendor||void 0,this.uid=t.uid,this.uid||(r.Mantle.MIN_API_CONTROL_ZINDEX+=1,this.uid="unknown:unknown-"+r.Mantle.MIN_API_CONTROL_ZINDEX),this._options=t},e.prototype.getMapTypeStyle=function(){return this.mapTypeStyle},e.prototype._setMapTypeStyle=function(t){this.mapTypeStyle=t},e}(r.Mantle.ImageMapType);e.VectorMapType=a},function(t,e,n){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(n(23)),r=function(){function t(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}return t.prototype.search=function(t){var e=this.data,n=[];if(!d(t,e))return n;for(var o,i,r=this.toBBox,a=[];e;){for(var s=0;s<e.children.length;s++){var p=e.children[s],l=e.leaf?r(p):p;d(t,l)&&(e.leaf?n.push(p):(i=l,(o=t).minX<=i.minX&&o.minY<=i.minY&&i.maxX<=o.maxX&&i.maxY<=o.maxY?this._all(p,n):a.push(p)))}e=a.pop()}return n},t.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var o=this.data;this.data=n,n=o}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},t.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},t.prototype.clear=function(){return this.data=f([]),this},t.prototype.toBBox=function(t){return t},t.prototype.compareMinX=function(t,e){return t.minX-e.minX},t.prototype.compareMinY=function(t,e){return t.minY-e.minY},t.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},t.prototype._build=function(t,e,n,o){var i,r=n-e+1,s=this._maxEntries;if(r<=s)return a(i=f(t.slice(e,n+1)),this.toBBox),i;o||(o=Math.ceil(Math.log(r)/Math.log(s)),s=Math.ceil(r/Math.pow(s,o-1))),(i=f([])).leaf=!1,i.height=o;var p=Math.ceil(r/s),l=p*Math.ceil(Math.sqrt(s));y(t,e,n,l,this.compareMinX);for(var u=e;u<=n;u+=l){var c=Math.min(u+l-1,n);y(t,u,c,p,this.compareMinY);for(var h=u;h<=c;h+=p){var d=Math.min(h+p-1,c);i.children.push(this._build(t,h,d,o-1))}}return a(i,this.toBBox),i},t.prototype._chooseSubtree=function(t,e,n,o){for(;o.push(e),!e.leaf&&o.length-1!==n;){for(var i=1/0,r=1/0,a=void 0,s=0;s<e.children.length;s++){var p=e.children[s],l=c(p),u=(h=t,d=p,(Math.max(d.maxX,h.maxX)-Math.min(d.minX,h.minX))*(Math.max(d.maxY,h.maxY)-Math.min(d.minY,h.minY))-l);u<r?(r=u,i=l<i?l:i,a=p):u===r&&l<i&&(i=l,a=p)}e=a||e.children[0]}var h,d;return e},t.prototype._insert=function(t,e,n){var o=n?t:this.toBBox(t),i=[],r=this._chooseSubtree(o,this.data,e,i);for(r.children.push(t),p(r,o);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(o,i,e)},t.prototype._split=function(t,e){var n=t[e],o=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,o);var r=this._chooseSplitIndex(n,i,o),s=f(n.children.splice(r,n.children.length-r));s.height=n.height,s.leaf=n.leaf,a(n,this.toBBox),a(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},t.prototype._splitRoot=function(t,e){this.data=f([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},t.prototype._chooseSplitIndex=function(t,e,n){for(var o,i,r,a,p,l,u,h=1/0,d=1/0,f=e;f<=n-e;f++){var y=s(t,0,f,this.toBBox),_=s(t,f,n,this.toBBox),M=(i=y,r=_,void 0,void 0,void 0,void 0,a=Math.max(i.minX,r.minX),p=Math.max(i.minY,r.minY),l=Math.min(i.maxX,r.maxX),u=Math.min(i.maxY,r.maxY),Math.max(0,l-a)*Math.max(0,u-p)),g=c(y)+c(_);M<h?(h=M,o=f,d=g<d?g:d):M===h&&g<d&&(d=g,o=f)}return o||n-e},t.prototype._chooseSplitAxis=function(t,e,n){var o=t.leaf?this.compareMinX:l,i=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,n,o)<this._allDistMargin(t,e,n,i)&&t.children.sort(o)},t.prototype._allDistMargin=function(t,e,n,o){t.children.sort(o);for(var i=this.toBBox,r=s(t,0,e,i),a=s(t,n-e,n,i),l=h(r)+h(a),u=e;u<n-e;u++){var c=t.children[u];p(r,t.leaf?i(c):c),l+=h(r)}for(u=n-e-1;u>=e;u--){c=t.children[u];p(a,t.leaf?i(c):c),l+=h(a)}return l},t.prototype._adjustParentBBoxes=function(t,e,n){for(var o=n;o>=0;o--)p(e[o],t)},t.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():a(t[e],this.toBBox)},t}();function a(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,o,i){i||(i=f(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var r=e;r<n;r++){var a=t.children[r];p(i,t.leaf?o(a):a)}return i}function p(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function f(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(t,e,n,o,r){for(var a=[e,n];a.length;)if(!((n=a.pop())-(e=a.pop())<=o)){var s=e+Math.ceil((n-e)/o/2)*o;i.default(t,s,e,n,r),a.push(e,s,s,n)}}e.default=r},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.NaverRasterMapTypeOptions=void 0;var r=n(0),a=n(2),s=n(1),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.getNormalMap=function(t){return h({uid:"naver:normal",name:"\uc77c\ubc18",tileType:"basic",overlayType:"bg.ol.ts.lko",originalOverlayType:"bg.ol.ts.lko"},t)},e.getSatelliteMap=function(t){return h({uid:"naver:satellite",name:"\uc704\uc131",tileType:"satellite",overlayType:"bg",originalOverlayType:"bg",darktheme:!0},t)},e.getHybridMap=function(t){return h({uid:"naver:satellite:hybrid",name:"\uacb9\uccd0\ubcf4\uae30",tileType:"satellite",overlayType:"bg.ol.ts.lko",originalOverlayType:"bg.ol.ts.lko",darktheme:!0},t)},e.getTerrainMap=function(t){return h({uid:"naver:normal:terrain",name:"\uc9c0\ud615\ub3c4",tileType:"terrain",overlayType:"bg.ol.ts.lko",originalOverlayType:"bg.ol.ts.lko"},t)},e.getCadastralLayer=function(t){return h({uid:"naver:cadastral",name:"\uc9c0\uc801\ub3c4",imgFormat:0,tileType:"basic",overlayType:"bg.ol.lp.ts",overview:!1},t)},e.getTrafficLayer=function(t){return h({uid:"naver:traffic",name:"\uad50\ud1b5",imgFormat:0,tileType:"basic",overlayType:"ctt.lko"},t)},e.getMountainLayer=function(t){return h({uid:"naver:mountain",name:"\ub4f1\uc0b0\ub85c",imgFormat:0,tileType:"basic",overlayType:"ar.lko",overview:!1},t)},e.getCctvLayer=function(t){return h({uid:"naver:cctv",name:"cctv",imgFormat:0,tileType:"basic",overlayType:"cctv.lko",overview:!1},t)},e.prototype.getTileUrl=function(t,e,n){var o=this.map;if(!this.overview&&n<1||this.blankMap||!o)return s.BLANK_IMAGE;var i=o.mapTypes,a=i&&i.getSelectedType()||null,p=a.getMapTypeOptions().tileType||"basic";if(!(this.versions[p]||null)||!a)return s.BLANK_IMAGE;var l,u=this.overlayType,c=0,h=this.map.layers.getLayerNames(),d=this.map.layers&&this.map.layers.traffic?this.map.layers.traffic.getRTSVersion():"",f=this.mergeLayersOverlayType(h);r.Mantle.isArray(u)||(u=[u]);var y=[];for(c=0,l=u.length;c<l;c++)y.push(this.toTileUrl(t,e,n,p,u[c],f,d));return y},e.prototype.toTileUrl=function(t,e,n,o,i,r,a){var s=r?"."+r:"",p=this.refineOverlayType(i+s);return this.getTileServerLocation(t,e,n,o)+this.getOverlayTypeQuery(p)+this.getRtsVersionQuery(a)},e.prototype.getTileServerLocation=function(t,e,n,o){var i=this.map.getTileMapMeta(o).tiles;return a.composePath(i[0],{x:t,y:e,z:n})},e.prototype.getOverlayTypeQuery=function(t){return t?"?mt="+t:""},e.prototype.getRtsVersionQuery=function(t){return t?"&rtsVersion="+t:""},e.prototype.mergeLayersOverlayType=function(t){if(!t||0===t.length)return"";for(var e=[],n=t.length,o=0;o<n;o+=1){var i="";switch(t[o]){case"bicycle":i=s.STYLE_MAP_OVERLAY_TYPE.BYCYCLE;break;case"street":i=s.STYLE_MAP_OVERLAY_TYPE.PANORAMA;break;case"traffic":i=s.STYLE_MAP_OVERLAY_TYPE.CTT;break;case"cadastral":i=s.STYLE_MAP_OVERLAY_TYPE.CADASTRAL;break;case"mountain":i=s.STYLE_MAP_OVERLAY_TYPE.HIKING_TRAIL;break;case"cctv":i=s.STYLE_MAP_OVERLAY_TYPE.CCTV}i&&e.push(i)}return e.length>0?e.join("."):""},e.prototype.refineOverlayType=function(t){if(!t)return"";var e=t.split("."),n=e.length;if(0===n)return"";for(var o=0;o<n;o+=1){if(e[o]===s.STYLE_MAP_OVERLAY_TYPE.CADASTRAL){var i=e.indexOf(s.STYLE_MAP_OVERLAY_TYPE.POI_KOREAN);e=e.slice(0,i).concat(e.slice(i+1,n));break}}return e.sort(function(t,e){return s.OVERLAY_TYPE_ORDER_SEQUENCE.indexOf(t)-s.OVERLAY_TYPE_ORDER_SEQUENCE.indexOf(e)}).join(".")},e.mixin=function(){e.mixed||(a.mixin(r.Mantle.NaverStyleMapTypeOptions,e),r.Mantle.NaverStyleMapTypeOptions.getNormalMap=e.getNormalMap,r.Mantle.NaverStyleMapTypeOptions.getSatelliteMap=e.getSatelliteMap,r.Mantle.NaverStyleMapTypeOptions.getHybridMap=e.getHybridMap,r.Mantle.NaverStyleMapTypeOptions.getTerrainMap=e.getTerrainMap,r.Mantle.NaverStyleMapTypeOptions.getCadastralLayer=e.getCadastralLayer,r.Mantle.NaverStyleMapTypeOptions.getMountainLayer=e.getMountainLayer,r.Mantle.NaverStyleMapTypeOptions.getCctvLayer=e.getCctvLayer,r.Mantle.NaverStyleMapTypeOptions.getTrafficLayer=e.getTrafficLayer,r.Mantle.NaverStyleMapTypeOptions.prototype.getTileUrl=e.prototype.getTileUrl,r.Mantle.NaverStyleMapTypeOptions.prototype.toTileUrl=e.prototype.toTileUrl,e.mixed=!0)},e.mixed=!1,e}(r.Mantle.NaverStyleMapTypeOptions);e.NaverRasterMapTypeOptions=p;var l={title:"NAVER",link:"https://navercorp.com"},u={title:"OpenStreetMap",bounds:r.Mantle.LatLngBounds(r.Mantle.LatLng(38.72384708044177,132.43015866445896),r.Mantle.LatLng(32.006017049418105,122.77804853762284)),link:"http://www.openstreetmap.org/copyright",exclude:!0},c={world:[{title:"OpenStreetMap",link:"http://www.openstreetmap.org/copyright"},{title:"Natural Earth",link:"http://www.naturalearthdata.com/"}],normal:[l,u],satellite:[l,u,{title:"SPOT"},{title:"\uc778\ucc9c\uad11\uc5ed\uc2dc",bounds:r.Mantle.LatLngBounds(r.Mantle.LatLng(36.915887,125.690716),r.Mantle.LatLng(37.687529,126.853252))},{title:"\uad6d\ud1a0\uc9c0\ub9ac\uc815\ubcf4\uc6d0",bounds:[r.Mantle.LatLngBounds(r.Mantle.LatLng(36.9604682,126.7654746),r.Mantle.LatLng(38.1834428,127.8062689)),r.Mantle.LatLngBounds(r.Mantle.LatLng(33.1940984,126.1631646),r.Mantle.LatLng(33.5666617,126.9448023)),r.Mantle.LatLngBounds(r.Mantle.LatLng(34.2894075,126.1667903),r.Mantle.LatLng(36.157058,127.916409)),r.Mantle.LatLngBounds(r.Mantle.LatLng(37.0338716,127.1017059),r.Mantle.LatLng(38.6097027,129.4009515)),r.Mantle.LatLngBounds(r.Mantle.LatLng(34.7636795,127.5739401),r.Mantle.LatLng(37.1422076,129.6170151)),r.Mantle.LatLngBounds(r.Mantle.LatLng(37.2844933,130.6524052),r.Mantle.LatLng(37.6950155,131.0788897)),r.Mantle.LatLngBounds(r.Mantle.LatLng(35.9625217,125.5567761),r.Mantle.LatLng(37.2537581,128.6557701))]}],traffic:[{title:"\uad6d\ud1a0\uad50\ud1b5\ubd80"},{title:"\uacbd\ucc30\uccad (UTIS)"}],cadastral:[{title:"\ub2e4\uc6b8\uc9c0\uc624\uc778\ud3ec"}],cctv:[{title:"\uc11c\uc6b8\uc2dc\uc124\uacf5\ub2e8"},{title:"\uad6d\ud1a0\uad50\ud1b5\ubd80"},{title:"\uacbd\uae30\ub3c4\uad50\ud1b5\uc815\ubcf4\uc13c\ud130"}]},h=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n,o=[],i=0,a=t.length;i<a;i++)o[i]=t[i];return o.unshift({imgFormat:"0"}),n=r.Mantle.extend.apply(null,o),r.Mantle.forEach(n,function(t,e){"overlayType"!==e&&"originalOverlayType"!==e||(t=r.Mantle.NaverStyleMapTypeOptions.sortOverlay(t),n[e]=r.Mantle.NaverStyleMapTypeOptions.convertToUserLanguage(t))}),n&&(n.provider=c[n.uid.split(":")[1]]),new r.Mantle.ImageMapType(new r.Mantle.NaverStyleMapTypeOptions(n))}},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.IndoorLayer=void 0;var a=n(0),s=n(4),p=n(3),l=r(n(7)),u=n(24),c=n(2),h=n(1),d=function(t){function e(e){var n=t.call(this)||this;n.NAME="indoor",n.INDOOR_MASTER_LAYER="indoorMaster",n.FILE_FORMAT="geojson",n.MIN_ZOOM=17,n.MAX_ZOOM=22,n.OPTIONS={minZoom:n.MIN_ZOOM,maxZoom:n.MAX_ZOOM,tileSize:new a.Mantle.Size(256,256),getTile:n.getTile.bind(n)},n.indoorMasterMeta=null,n.indoorMasterObjectTree=new l.default,n.indoorMasterObjectMap={},n.indoorMasterObjects=[],n.indoorGroundObject=null,n.name=n.NAME,n._initRegistry(n.OPTIONS);var o=n.registry;if(!o.getSelectedTypeId()){var i=o.getTypeIds();i.length&&o.setSelectedTypeId(i[0])}return n.options=a.Mantle.extend({zIndex:12,overlayMap:!0},e),n.initMetadata(),n}return i(e,t),e.prototype.showIndoor=function(t,e){this.setIndoorGroundObject({zone:t,zorder:e,tileUrl:this.getIndoorGroundTileUrl(t,e)}),this.removeAllIndoorMasterObjects(),this.refresh(!1)},e.prototype.hideIndoor=function(){this.setIndoorGroundObject(null),this.refresh(!1)},e.prototype.updateIndoor=function(){if(this.indoorGroundObject){var t=this.indoorGroundObject,e=t.zone,n=t.zorder;this.setIndoorGroundObject({zone:e,zorder:n,tileUrl:this.getIndoorGroundTileUrl(e,n)}),this.refresh(!1)}},e.prototype.setIndoorGroundObject=function(t){this.indoorGroundObject=t},e.prototype.queryFeatures=function(t){if(!this.indoorMasterObjectTree.data)return null;var e=this.indoorMasterObjectTree.search({minX:t.x,minY:t.y,maxX:t.x,maxY:t.y});if(!e||0===e.length)return null;for(var n=null,o=e[0].id,i=this.indoorMasterObjects.length,r=0;r<i;r+=1){if(this.indoorMasterObjects[r].properties.id===o){n=this.indoorMasterObjects[r];break}}if(!n)return null;var a=[t.x,t.y],s=n.coordinates[0];if(!u.pointInPolygon(a,s))return null;var p=n.polygon.getBounds();return{type:h.FEATURE,source:null,layer:{id:this.INDOOR_MASTER_LAYER,source:null,indoorMaster:!0,poi:!1},bbox:[p.minX(),p.minY(),p.maxX(),p.maxY()],properties:n.properties}},e.prototype.initMetadata=function(){var t=this,e=s.ServerConfig.getPath(s.PathType.INDOOR_MASTER,{format:this.FILE_FORMAT});p.FileLoader.loadJSON(e).then(function(e){t.indoorMasterMeta=e,t.refresh(!1)})},e.prototype.listenMapEvents=function(t){var e=this;if(t){var n=t.getMapModel(),o=t.getMapAction(),i=n.get("tileIndexArray");this.mapListeners=[a.Mantle.Event.addListener(o,"idle",function(){var t=n.get("zoom");(t<e.MIN_ZOOM||t>e.MAX_ZOOM)&&e.removeAllIndoorMasterObjects()}),a.Mantle.Event.addListener(i,"remove_at",function(t,n){var o=n.xIndex+"/"+n.yIndex;e.removeIndoorMasterObject(o)})]}},e.prototype.unlistenMapEvents=function(){a.Mantle.Event.removeListener(this.mapListeners)},e.prototype.removeAllIndoorMasterObjects=function(){a.Mantle.forEach(this.indoorMasterObjects,function(t){a.Mantle.Event.removeListener(t.listeners),t.polygon.setMap(null)}),this.indoorGroundObject||(this.indoorMasterObjects=[],this.indoorMasterObjectMap={},this.indoorMasterObjectTree.clear())},e.prototype.removeIndoorMasterObject=function(t){if(this.map&&this.indoorMasterObjectMap[t]){var e,n=this.indoorMasterObjectMap[t];a.Mantle.Event.removeListener(n.listeners),n.polygon.setMap(null);for(var o=this.indoorMasterObjects.length,i=0;i<o;i+=1)if(n===this.indoorMasterObjects[i]){e=i;break}this.indoorMasterObjects.splice(e,1),this.indoorMasterObjectMap[t]=void 0,delete this.indoorMasterObjectMap[t]}},e.prototype.addIndoorMasterObject=function(t,e){var n=this,o=e.properties,i=o.id,r=e.geometry.coordinates,s={map:this.map,paths:r,fillColor:"#ebe4f3",strokeColor:"#8353b4",fillOpacity:.15,strokeOpacity:.15,zIndex:10,clickable:!0},p=new a.Mantle.Polygon(s),l=p.getBounds(),u=function(t){var e=t.pointerEvent.type;if("click"!==e){t.overlay.setOptions({fillColor:"mouseover"===e?s.strokeColor:s.fillColor})}else{var o=t.coord,i=t.pointerEvent;a.Mantle.Event.trigger(n.map.getMapAction(),"click",{coord:o,latlng:o,domEvent:i,pointerEvent:i,originalEvent:i,type:"click"})}},c={properties:o,coordinates:r,polygon:p,listeners:[a.Mantle.Event.addListener(p,"click",u),a.Mantle.Event.addListener(p,"mouseover",u),a.Mantle.Event.addListener(p,"mouseout",u)]};this.indoorMasterObjectMap[t]=c,this.indoorMasterObjects.push(c),this.indoorMasterObjectTree.insert({id:i,minX:l.minX(),minY:l.minY(),maxX:l.maxX(),maxY:l.maxY()})},e.prototype.isDuplicatedIndoorMaster=function(t){for(var e=!1,n=this.indoorMasterObjects.length,o=0;o<n;o+=1)if(this.indoorMasterObjects[o].properties.id===t){e=!0;break}return e},e.prototype.getIndoorGroundTileUrl=function(t,e){var n=this,o=!!n.map.layers&&n.map.layers.getLayerNames().indexOf(h.LAYER_TYPE.STREET)>=0,i=a.Mantle.Agent.devicePixelRatio>1?"@2x":"";return""+s.ServerConfig.getPath(s.PathType.INDOOR_GROUND_TILE)+i+".png?mt=ib.lko"+(o?".ps":"")+"&zone="+t+"&zorder="+e},e.prototype.getTile=function(t,e,n){var o=this;if(!this.indoorMasterMeta||n<this.MIN_ZOOM||n>this.MAX_ZOOM)return null;if(this.indoorGroundObject){var i=this.indoorGroundObject.tileUrl,r=this.registry.getSelectedType().tileSize;return new a.Mantle.ImageTile({tileIndex:{xIndex:t,yIndex:e},urls:[c.composePath(i,{x:t,y:e,z:n})],size:r,imgonload:null,imgonerror:null})}var s=document.createElement("div"),l=c.composePath(this.indoorMasterMeta.tiles[0],{x:t,y:e,z:n});return p.FileLoader.loadJSON(l).then(function(n){if(n&&n.features&&0!==n.features.length)for(var i=n.features.length,r=0;r<i;r+=1){var a=n.features[r],s=a.properties.id;if(o.isDuplicatedIndoorMaster(s))return;var p=t+"/"+e;o.addIndoorMasterObject(p,a)}}),s},e.prototype.setMap=function(t){var e=this.getMap();if(t!==e){if(this._beforeSetMap(t),t){this.map=t;var n=this.getLayerType(),o=n.getMapTypeOptions?n.getMapTypeOptions():null;o&&(o.map=t),this._initPane().setMapTypeRegistry(this.registry),this._addToMap(t)}else e&&(this.removeAllIndoorMasterObjects(),this._destroy());return this.set("map",t),this._afterSetMap(t),!0}},e.prototype.refresh=function(t){if(this.map){var e=this.map;this.setMap(null),this.setMap(e),this.pane&&this.pane.refresh(t)}},e.prototype._addToMap=function(t){this.pane.setMap(t),t.layers.set(this.name,this),t.set(this.name+"Layer",this),this.listenMapEvents(t)},e.prototype._destroy=function(){this.pane&&(this.pane.unbindAll(),this.pane.setMap(null),this.pane=null,delete this.pane);var t=this.getMap();if(t)return this.unlistenMapEvents(),t.layers.set(this.name,null),t.set(this.name+"Layer",null),this.set("map",null),this.map=null,delete this.map,!1},e}(a.Mantle.Layer);e.IndoorLayer=d},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.LayerGL=void 0;var r=n(0),a=n(2),s=n(1),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.setMap=function(t){var e=this.getMap();if(t!==e){if(!t||t.isGLReady()){if(this._beforeSetMap(t),t){this.map=t;var n=this.getLayerType(),o=n.getMapTypeOptions?n.getMapTypeOptions():null;o&&(o.map=t),this.renderLayer(!0),this._addToMap(t)}else e&&(this.renderLayer(!1),this._destroy());return this.set("map",t),this._afterSetMap(t),!0}t.addListenerOnce("glReady",this.setMap.bind(this,t))}},e.prototype.refresh=function(t){},e.prototype._destroy=function(){var t=this.getMap();if(t)return t.layers.set(this.name,null),t.set(this.name+"Layer",null),this.set("map",null),this.map=null,delete this.map,!1},e.prototype._addToMap=function(t){t.layers.set(this.name,this),t.set(this.name+"Layer",this)},e.prototype.getValidLayerGroupNameList=function(t){var e,n=t||this.name,o=this.map.getMapTypeId(),i=this.map.getOptions("mapTypes")[o].getMapTypeStyle(),r=i.metadata,a=i.name,p=r["map-types"],l=null;switch(a){case s.MAP_TYPE.NORMAL:l=p.basic;break;case s.MAP_TYPE.TERRAIN:l=p.terrain;break;case s.MAP_TYPE.SATELLITE:l=p.satellite;break;case s.MAP_TYPE.HYBRID:l=p.satellite_overlay}var u=l.categories;switch(n){case s.LAYER_TYPE.CCTV:e=u.cctv;break;case s.LAYER_TYPE.BICYCLE:e=u.bike;break;case s.LAYER_TYPE.STREET:e=u.panorama;break;case s.LAYER_TYPE.MOUNTAIN:e=u.mountain;break;case s.LAYER_TYPE.TRAFFIC:e=u.ctt;break;case s.LAYER_TYPE.INDOOR_GND:e=u.indoorgnd;break;case s.LAYER_TYPE.INDOOR_TILE_MAP:e=u.indoor;break;case s.LAYER_TYPE.INDOOR_POI:e=u.indoor_poi}return e},e.prototype.renderLayer=function(t){if(this.map){var e=this.map.getMapbox(),n=e.getStyle().layers,o=this.getValidLayerGroupNameList();r.Mantle.forEach(n,function(n){if(n.metadata&&n.metadata.group){var i=n.metadata.group;o.indexOf(i)>=0&&e.setLayoutProperty(n.id,"visibility",t?"visible":"none")}})}},e.mixin=function(){e.mixed||(a.mixin(r.Mantle.Layer,e),r.Mantle.Layer.prototype.setMap=e.prototype.setMap,r.Mantle.Layer.prototype.refresh=e.prototype.refresh,r.Mantle.Layer.prototype._destroy=e.prototype._destroy,r.Mantle.Layer.prototype._addToMap=e.prototype._addToMap,e.mixed=!0)},e.mixed=!1,e}(r.Mantle.Layer);e.LayerGL=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getMapboxLayerById=e.getMetadataCategoriesByMapType=void 0;var o=n(1);e.getMetadataCategoriesByMapType=function(t,e){var n=null,i=e["map-types"];switch(t){case o.MAP_TYPE.NORMAL:n=i.basic;break;case o.MAP_TYPE.TERRAIN:n=i.terrain;break;case o.MAP_TYPE.SATELLITE:n=i.satellite;break;case o.MAP_TYPE.HYBRID:n=i.satellite_overlay}return n&&n.categories?n.categories:null},e.getMapboxLayerById=function(t,e){for(var n=null,o=e.length,i=0;i<o;i+=1)if(e[i].id===t){n=e[i];break}return n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(13);var o=n(17),i=n(29),r=n(31),a=n(5),s=n(6),p=n(32),l=n(33),u=n(34),c=n(35),h=n(36),d=n(37),f=n(38),y=n(39),_=n(40),M=n(8),g=n(41),v=n(9),m=n(42),E=n(43),O=n(44),L=n(46),T=n(48);o.MapGL.mixin(),i.MapModelGL.mixin(),r.MapViewGL.mixin(),O.MapAction.mixin(),_.Layer.mixin(),M.NaverRasterMapTypeOptions.mixin(),p.OverlayViewGL.mixin(),l.AbstractShapeOverlayGL.mixin(),u.InfoWindowGL.mixin(),c.PolygonGL.mixin(),h.PolylineGL.mixin(),d.CircleGL.mixin(),f.EllipseGL.mixin(),y.RectangleGL.mixin(),window.naver.maps.Util.extend(window.naver,{glEnabled:!0}),window.naver.maps.Util.extend(window.naver.maps,{NaverVectorMapTypeOption:a.NaverVectorMapTypeOptions,VectorMapType:s.VectorMapType,MountainLayer:g.MountainLayer,CctvLayer:m.CctvLayer,IndoorLayer:v.IndoorLayer,MapAttributionControl:E.MapAttributionControl,MarkerGroup:L.MarkerGroup,SimpleMarker:T.SimpleMarker})},function(t,e,n){"use strict";t.exports=n(14).polyfill()},function(t,e,n){(function(e,n){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */var o;o=function(){"use strict";function t(t){return"function"==typeof t}var o=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=0,r=void 0,a=void 0,s=function(t,e){f[i]=t,f[i+1]=e,2===(i+=2)&&(a?a(y):m())};var p="undefined"!=typeof window?window:void 0,l=p||{},u=l.MutationObserver||l.WebKitMutationObserver,c="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function d(){var t=setTimeout;return function(){return t(y,1)}}var f=new Array(1e3);function y(){for(var t=0;t<i;t+=2){(0,f[t])(f[t+1]),f[t]=void 0,f[t+1]=void 0}i=0}var _,M,g,v,m=void 0;function E(t,e){var n=this,o=new this.constructor(T);void 0===o[L]&&G(o);var i=n._state;if(i){var r=arguments[i-1];s(function(){return N(i,o,r,n._result)})}else w(n,o,t,e);return o}function O(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(T);return S(e,t),e}c?m=function(){return e.nextTick(y)}:u?(M=0,g=new u(y),v=document.createTextNode(""),g.observe(v,{characterData:!0}),m=function(){v.data=M=++M%2}):h?((_=new MessageChannel).port1.onmessage=y,m=function(){return _.port2.postMessage(0)}):m=void 0===p?function(){try{var t=Function("return this")().require("vertx");return void 0!==(r=t.runOnLoop||t.runOnContext)?function(){r(y)}:d()}catch(t){return d()}}():d();var L=Math.random().toString(36).substring(2);function T(){}var b=void 0,I=1,P=2;function x(e,n,o){n.constructor===e.constructor&&o===E&&n.constructor.resolve===O?function(t,e){e._state===I?A(t,e._result):e._state===P?D(t,e._result):w(e,void 0,function(e){return S(t,e)},function(e){return D(t,e)})}(e,n):void 0===o?A(e,n):t(o)?function(t,e,n){s(function(t){var o=!1,i=function(t,e,n,o){try{t.call(e,n,o)}catch(t){return t}}(n,e,function(n){o||(o=!0,e!==n?S(t,n):A(t,n))},function(e){o||(o=!0,D(t,e))},t._label);!o&&i&&(o=!0,D(t,i))},t)}(e,n,o):A(e,n)}function S(t,e){if(t===e)D(t,new TypeError("You cannot resolve a promise with itself"));else if(i=typeof(o=e),null===o||"object"!==i&&"function"!==i)A(t,e);else{var n=void 0;try{n=e.then}catch(e){return void D(t,e)}x(t,e,n)}var o,i}function R(t){t._onerror&&t._onerror(t._result),C(t)}function A(t,e){t._state===b&&(t._result=e,t._state=I,0!==t._subscribers.length&&s(C,t))}function D(t,e){t._state===b&&(t._state=P,t._result=e,s(R,t))}function w(t,e,n,o){var i=t._subscribers,r=i.length;t._onerror=null,i[r]=e,i[r+I]=n,i[r+P]=o,0===r&&t._state&&s(C,t)}function C(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var o=void 0,i=void 0,r=t._result,a=0;a<e.length;a+=3)o=e[a],i=e[a+n],o?N(n,o,i,r):i(r);t._subscribers.length=0}}function N(e,n,o,i){var r=t(o),a=void 0,s=void 0,p=!0;if(r){try{a=o(i)}catch(t){p=!1,s=t}if(n===a)return void D(n,new TypeError("A promises callback cannot return that same promise."))}else a=i;n._state!==b||(r&&p?S(n,a):!1===p?D(n,s):e===I?A(n,a):e===P&&D(n,a))}var Y=0;function G(t){t[L]=Y++,t._state=void 0,t._result=void 0,t._subscribers=[]}var j=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(T),this.promise[L]||G(this.promise),o(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&A(this.promise,this._result))):D(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===b&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,o=n.resolve;if(o===O){var i=void 0,r=void 0,a=!1;try{i=t.then}catch(t){a=!0,r=t}if(i===E&&t._state!==b)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(n===B){var s=new n(T);a?D(s,r):x(s,t,i),this._willSettleAt(s,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(o(t),e)},t.prototype._settledAt=function(t,e,n){var o=this.promise;o._state===b&&(this._remaining--,t===P?D(o,n):this._result[e]=n),0===this._remaining&&A(o,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;w(t,void 0,function(t){return n._settledAt(I,e,t)},function(t){return n._settledAt(P,e,t)})},t}();var B=function(){function e(t){this[L]=Y++,this._result=this._state=void 0,this._subscribers=[],T!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e(function(e){S(t,e)},function(e){D(t,e)})}catch(e){D(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this.constructor;return t(e)?this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return B.prototype.then=E,B.all=function(t){return new j(this,t).promise},B.race=function(t){var e=this;return o(t)?new e(function(n,o){for(var i=t.length,r=0;r<i;r++)e.resolve(t[r]).then(n,o)}):new e(function(t,e){return e(new TypeError("You must pass an array to race."))})},B.resolve=O,B.reject=function(t){var e=new this(T);return D(e,t),e},B._setScheduler=function(t){a=t},B._setAsap=function(t){s=t},B._asap=s,B.polyfill=function(){var t=void 0;if(void 0!==n)t=n;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var o=null;try{o=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===o&&!e.cast)return}t.Promise=B},B.Promise=B,B},t.exports=o()}).call(this,n(15),n(16))},function(t,e){var n,o,i=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(t){n=r}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(t){o=a}}();var p,l=[],u=!1,c=-1;function h(){u&&p&&(u=!1,p.length?l=p.concat(l):c=-1,l.length&&d())}function d(){if(!u){var t=s(h);u=!0;for(var e=l.length;e;){for(p=l,l=[];++c<e;)p&&p[c].run();c=-1,e=l.length}p=null,u=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new f(t,e)),1!==l.length||u||s(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(t,e,n,o){void 0===o&&(o=n),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,o){void 0===o&&(o=n),t[o]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e});this&&this.__importStar;Object.defineProperty(e,"__esModule",{value:!0}),e.MapGL=void 0;var p=n(0),l=n(18),u=n(2),c=n(5),h=n(3),d=n(20),f=n(1),y=n(21),_=n(8),M=n(9),g=n(25),v=n(4),m=n(10),E=n(26),O=n(11),L=n(27),T=n(28);var b=["_mapType_changed","_size_changed","setCenter","setCenterPoint","setZoom","zoomBy","updateBy","fitBounds","panTo","panToBounds","panBy","morph"],I=p.Mantle.Map.prototype,P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.picker=null,e.indoorLayer=null,e.tileMapMetaInfo=null,e.screenshot=null,e}return i(e,t),e.prototype.getMapbox=function(){return this._mapbox},e.prototype.getOverlayManager=function(){return this._overlayManager},e.prototype.isGLReady=function(){return this._glReady||!1},e.prototype.switchTo=function(t){var e=this;this.screenshot||(this.screenshot=new g.MapScreenshot(this));var n=p.Mantle.glSupported(),o=t===f.RENDER_MODE_GL&&n?f.RENDER_MODE_GL:f.RENDER_MODE_2D,i=Boolean(this.mapPane);o===this.get("renderMode")&&i||(this.set("renderMode",o),o===f.RENDER_MODE_GL?(this._destroy2D(),this._initGLLayers(),this._mapAction=new l.MapActionGL(this._mapOptions),c.NaverVectorMapTypeOptions.loadStyles().then(function(){for(var t=0,n=b;t<n.length;t++){var o=n[t];e[o]=e[o+"GL"]}e._initGLParts(),e._mapAction.setMapModel(e.getMapModel()),i&&(e._assemble(e.getMapTypeId()),e._onMapboxMove()),e.listenMapEventsGL()})):this._destroyGL(function(){for(var t=0,n=b;t<n.length;t++){var o=n[t];I[o]&&(e[o]=I[o])}e._initParts();var r=e._get2DMapTypes();e._mapOptions.set("mapTypes",r),i&&(e._assemble(e.getMapTypeId()),e.initCustomObjects2D()),e._mapModel.get("center")&&(e._mapModel.update(e._mapModel.get("center"),null,null,new p.Point(0,0)),e._triggerRedraw()),e.listenMapEvents()}))},e.prototype.queryRenderedFeatures=function(t,e){t=p.Mantle.box(t);var n=[];if(this.get("renderMode")===f.RENDER_MODE_GL){var o=this.getMapbox(),i=o.project([t.x,t.y]),a=o.queryRenderedFeatures(i);p.Mantle.forEach(a,function(t){var e=function(t){var e=t.type,n=t.source,o=t.properties,i=t.geometry;if(!Object.prototype.hasOwnProperty.call(L.MapboxSourceIdMap,n)||[f.MapboxSource.POI,f.MapboxSource.INDOOR_POI].indexOf(n)>=0&&["place","subwayStation"].indexOf(o.type)<0)return null;var a=L.MapboxSourceIdMap[n],s=function(){var t={id:o.id,type:o.type};switch(n){case f.MapboxSource.POI:case f.MapboxSource.INDOOR_POI:t=r(r({},t),{mid:o.mid||"",name_dp:o.name_dp||"",name_full:o.name_full||""});break;case f.MapboxSource.BUS:t=r(r({},t),{display_code:o.display_code||"",station_name:o.station_name||""});break;case f.MapboxSource.INDOOR_GND:t=o}return t}(),p=n===f.MapboxSource.INDOOR_GND?{id:a,source:a,indoorMaster:!0,poi:!1}:{id:a,source:a};return n===f.MapboxSource.INDOOR_GND?{type:e,properties:s,source:a,layer:p,bbox:u.getBounds(i.coordinates[0])}:{type:e,geometry:i,properties:s,source:a,layer:p}}(t);e&&n.push(e)})}else p.Mantle.forEach([this.picker,this.indoorLayer],function(e){if(e){var o=e.queryFeatures(t);o&&(o=p.Mantle.isArray(o)?o:[o],n.push.apply(n,o))}});if(e&&e.layers){var s=[];return p.Mantle.forEach(n,function(t){e.layers.indexOf(t.layer.id)>=0&&s.push(t)}),s}return n},e.prototype.showIndoor=function(t,e){this.indoorLayer&&this.indoorLayer.showIndoor(t,e),this.picker&&this.picker.setIndoorInfo(t,e)},e.prototype.hideIndoor=function(){this.indoorLayer&&this.indoorLayer.hideIndoor(),this.picker&&this.picker.clearIndoorInfo()},e.prototype.getScreenshot=function(t,e){var n;return n=t instanceof p.Mantle.PointBounds?t:new p.Mantle.PointBounds(t),this.screenshot.getMapCanvas(n,e)},e.prototype.getTileMapMeta=function(t){var e=null;switch(t){case f.STYLE_TILE_TYPE_TERRAIN:e=this.tileMapMetaInfo.terrain;break;case f.STYLE_TILE_TYPE_SATELLITE:e=this.tileMapMetaInfo.satellite;break;default:e=this.tileMapMetaInfo.basic}return e},e.prototype.autoResize=function(){this._onResizeWindow(null)},e.prototype.setZoom=function(t,e){this._stopTransition();var n=this._mapAction.setZoom(t+f.ZOOM_DIFF,e);!e&&n&&this._triggerIdle()},e.prototype.getZoom=function(){return this.get("renderMode")===f.RENDER_MODE_GL?this._mapModel.getZoom():this._mapModel.getZoom()-f.ZOOM_DIFF},e.prototype.getMinZoom=function(){return this.get("renderMode")===f.RENDER_MODE_GL?this.getOptions("minZoom"):this.getOptions("minZoom")-f.ZOOM_DIFF},e.prototype.getMaxZoom=function(){return this.get("renderMode")===f.RENDER_MODE_GL?this.getOptions("maxZoom"):this.getOptions("maxZoom")-f.ZOOM_DIFF},e.prototype.updateBy=function(t,e){var n=p.Mantle.box(t),o=this.get("renderMode")===f.RENDER_MODE_GL?e:e+f.ZOOM_DIFF;this.getCenter().equals(n)&&this.getZoom()===o||(this._stopTransition(),this.__reserveMove("updateBy",[n,o])||(this._mapModel.set("instantTiling",!0),this._mapModel.update(n,null,o),this._triggerIdle()))},e.prototype.morph=function(t,e,n){var o=p.Mantle.box(t),i=p.Mantle.hasValue(e)?this.get("renderMode")===f.RENDER_MODE_GL?e:e+f.ZOOM_DIFF:e;this._stopTransition(),this.__reserveMove("morph",[o,i,n])||this._mapAction.morph(o,i,n)},e.prototype.setCenterGL=function(t){t=p.Mantle.box(t,p.LatLng),this._mapModel.setCenter(t)},e.prototype.setCenterPointGL=function(t){t=p.Mantle.box(t,p.Point),this._mapModel.setCenterPoint(t)},e.prototype.setZoomGL=function(t,e){this._mapModel.setZoom(t)},e.prototype.zoomByGL=function(t,e,n){this._mapAction.zoomBy(t,e,n)},e.prototype.updateByGL=function(t,e){var n=null;u.isCameraOptions(t)?n=t:n={center:p.Mantle.box(t,p.LatLng).toLngLat(),zoom:e};this._mapModel.jumpTo(n)},e.prototype.fitBoundsGL=function(t,e){if(Array.isArray(t)&&"number"!=typeof t[0]){if(t.length<2)return;p.Mantle.forEach(t,function(e,n){e instanceof p.Point||(t[n]=p.Mantle.box(e,p.LatLng))});var n=void 0;n=t[0]instanceof p.LatLng?p.LatLngBounds:p.PointBounds,t=n.bounds.apply(n,t)}else t=p.Mantle.box(t,p.LatLngBounds);this._mapModel.fitBounds(t)},e.prototype.panToGL=function(t,e){t=p.Mantle.box(t,p.LatLng),e&&u.isAnimationOptions(e)&&(e=u.toMapboxAnimationOptions(e)),this._mapAction.panTo(t,e)},e.prototype.panToBoundsGL=function(t,e){t=p.Mantle.box(t,p.LatLngBounds),this._mapAction.panToBounds(t)},e.prototype.panByGL=function(t){t&&(t=p.Mantle.box(t,p.Point),this._mapAction.panBy(t))},e.prototype.morphGL=function(t,e,n){var o=null;u.isCameraOptions(t)?o=u.toMapboxCameraOptions(t):(o={center:p.Mantle.box(t,p.LatLng).toLngLat()},p.Mantle.hasValue(e)&&(o.zoom=e),n&&u.isAnimationOptions(n)&&p.Mantle.extend(o,u.toMapboxAnimationOptions(n))),this._mapAction.easeTo(o)},e.prototype._mapType_changedGL=function(t){var e=this;if(this.get("projection")){if(!this.isGLReady())return this.addListenerOnce("glReady",this._mapType_changed.bind(this,t));var n=this._mapbox.getStyle();if(n){var o=n.name,i=t.getMapTypeStyle(),r=!1,a=Boolean(this.layers&&this.layers[f.LAYER_TYPE.CADASTRAL]),s=i,l=O.getMetadataCategoriesByMapType(s.name,s.metadata);if(p.Mantle.forEach(s.layers,function(t){if(t.metadata&&t.metadata.group){var e=t.metadata.group,n=t.source;l.default.indexOf(e)>=0||n===f.MapboxSource.POI||n===f.MapboxSource.BUS?t.layout.visibility=a?"none":"visible":(l.landparcel.indexOf(e)>=0&&(t.layout.visibility=a?"visible":"none"),l.indoorgnd&&l.indoorgnd.indexOf(e)>=0&&(t.layout.visibility="visible"),(l.indoor&&l.indoor.indexOf(e)>=0||l.indoor_poi&&l.indoor_poi.indexOf(e)>=0)&&(t.layout.visibility="none"))}}),"string"==typeof i){var u=i.substring(i.lastIndexOf("/")+1);if(!(u.length>0))throw new Error("style path is invalid");o!==u.replace(".json","")&&(r=!0)}else o!==i.name&&(r=!0);r&&("string"==typeof i?h.FileLoader.loadJSON(i).then(function(t){e._injectLayersToStyle(t),e._mapbox.setStyle(t,{diff:!0})}).catch(function(t){}):(this._injectLayersToStyle(i),this._mapbox.setStyle(i,{diff:!0}))),this._mapModel.set("mapTypeId",this.getMapTypeId()),this._adjustZoomLimit(t)}}},e.prototype._size_changedGL=function(t){I._size_changed.apply(this,[t]),this._mapbox&&this._mapbox.resize()},e.prototype.initCustomObjects2D=function(){this.picker=new y.MapTilePicker(this),this.indoorLayer=new M.IndoorLayer},e.prototype.initCustomObjectsGL=function(){this.indoorLayer=new T.IndoorLayerGL},e.prototype._initMapOptions=function(t){var e=t.gl,n=t.zoom,o=t.minZoom,i=t.maxZoom,a=new p.Mantle.MapOptions(this,r(r({},t),{zoom:e?n:Math.round(n+f.ZOOM_DIFF),minZoom:p.Mantle.hasValue(o)?e?o:o+f.ZOOM_DIFF:null,maxZoom:p.Mantle.hasValue(i)?e?i:i+f.ZOOM_DIFF:null}));return null!==o&&a.set("userMinZoom",a.get("minZoom")),null!==i&&a.set("userMaxZoom",a.get("maxZoom")),this._listenMapOptions(a),this._mapOptions=a,a},e.prototype._addCopyrightControls=function(){this._addInternalControl("mapAttributionControl",p.Mantle.MapAttributionControl)},e.prototype._loadStyleMapMeta=function(){var t=this,e=v.ServerConfig.getPath(v.PathType.TILE_IMAGE),n=(f.DEVICE_PIXEL_RATIO>1?"@2x":"")+".json?fmt=png",o=[e+"/"+f.STYLE_TILE_TYPE_BASIC+n,e+"/"+f.STYLE_TILE_TYPE_TERRAIN+n,e+"/"+f.STYLE_TILE_TYPE_SATELLITE+n],i=new p.Mantle.TileMetadataLoader(f.TILE_TYPES,o);p.Mantle.Event.addListener(i,"style_map_metadata_load_completed",function(e){t.tileMapMetaInfo=e;var n={mapTypes:[],listOfFailed:[],tileTypes:[],listOfTileFailed:[],isFailed:e.isFailed};p.Mantle.forEach(e.tileTypes,function(t){n.mapTypes.push(t),n.tileTypes.push(t),Object.prototype.hasOwnProperty.call(e[t],"isFailed")&&(n.listOfFailed.push(t),n.listOfTileFailed.push(t))}),t.initStyleMap(n)})},e.prototype.initStyleMap=function(t){this._updateStyleMapTypeOption(),this.isStyleMapReady=!0,this._unsetMapTypeSetting(),this._assembleRest(),this._setPendingOptions(),this.initStatus=t,this.get("renderMode")===f.RENDER_MODE_2D&&this.trigger("init_stylemap",t)},e.prototype._updateStyleMapTypeOption=function(){p.Mantle.NaverStyleMapTypeOptions.prototype.versions=this.tileMapMetaInfo.versions||{},p.Mantle.NaverStyleMapTypeOptions.prototype.minZoom=this.tileMapMetaInfo.minzoom,p.Mantle.NaverStyleMapTypeOptions.prototype.maxZoom=this.tileMapMetaInfo.maxzoom},e.prototype._initGLParts=function(){var t=this._mapModel,e=this._mapView,n=this._mapOptions;this.isGLReady()&&t.get("center")&&t.set("zoom",this._mapModel.get("zoom")-f.ZOOM_DIFF,!0),this._overlayManager=new d.OverlayGLManager;var o=this._getGLMapTypes(),i=this._createMapbox(n,o);this._mapbox=i,e.setMapbox(i),t.setMapbox(i),this._extendProjection(),n.set("mapTypes",o),e.get("loadingDiv").style.display="",this.isGLReady()?this._onMapboxLoad():i.once("load",this._onMapboxLoad.bind(this)),this._boundOnMapboxMove||(this._boundOnMapboxMove=this._onMapboxMove.bind(this)),i.on("move",this._boundOnMapboxMove)},e.prototype._initGLLayers=function(){m.LayerGL.mixin(),E.CadastralLayerGL.mixin()},e.prototype._get2DMapTypes=function(){var t=this.mapTypes||this._mapOptions.get("mapTypes");return 0!==(t.uid||"").indexOf("naver:vectormap")?t:_.NaverRasterMapTypeOptions.getMapTypes()},e.prototype._getGLMapTypes=function(){var t=this.mapTypes||this._mapOptions.get("mapTypes");return 0!==(t.uid||"").indexOf("naver:imagemap")?t:c.NaverVectorMapTypeOptions.getMapTypes()},e.prototype._createMapbox=function(t,e){if(this._mapbox)return this._mapbox;var n=e?e.get(t.mapTypeId):t.mapTypes[t.mapTypeId],o=t.get("maxBounds");o&&!Array.isArray(o)&&(o=o.toLngLatBounds());var i=this._mapModel,r=t.get("zoom"),a=t.get("center");return i.get("center")&&(r=i.get("zoom"),a=i.get("center")),new null.Map({container:this._mapView.getElement(),interactive:!0,zoom:r,center:[a.x,a.y],style:n.getMapTypeStyle(),bearing:0,pitch:0,hash:!1,trackResize:!1,minZoom:n.minZoom||0,maxZoom:n.maxZoom||20,maxBounds:o,keyboard:!1,boxZoom:!1,dragRotate:!1,touchZoomRotate:!1,dragPan:!1,scrollZoom:t.scrollWheel,doubleClickZoom:!1,attributionControl:!1})},e.prototype._onMapboxMove=function(){this._triggerRedraw()},e.prototype._onMapboxLoad=function(){var t=this,e=this._mapOptions,n=this._mapModel,o=this.getMapbox(),i=n.get("center"),r=n.get("zoom"),a=n.get("rotation"),s=n.get("tilt");o.jumpTo({center:[i.x,i.y],zoom:r}),0===a&&0===s||o.easeTo({bearing:a,pitch:s,duration:500,animate:!0}),e.get("scrollWheel")&&o.scrollZoom.enable();var l=this._mapView.get("loadingDiv");p.DOM.animate(l,{opacity:0},{duration:300,easing:"easeOutCubic",complete:function(){l.style.display="none",p.DOM.setOpacity(l,.5),t._mapPane2D&&(t._mapPane2D.setMap(null),delete t._mapPane2D),t._triggerRedraw(),t._glReady=!0,t._overlayManager.ready(t),t.trigger("glReady"),t.trigger("tilesloaded"),t.trigger("init_stylemap",{mapTypes:t.mapTypes.getTypeIds(),listOfFailed:[],tileTypes:[],listOfTileFailed:[],isFailed:!1})}})},e.prototype._injectLayersToStyle=function(t){var e=this._mapbox,n=e.getStyle().layers;p.Mantle.forEach(n,function(e){var n=e,o=O.getMapboxLayerById(n.id,t.layers);o&&n.layout.visibility!==o.layout.visibility&&(o.layout.visibility=n.layout.visibility)});var o=this.getOverlayManager().getAllLayerIds();p.Mantle.forEach(o,function(n){var o=e.getLayer(n);if(o&&o.source){var i=e.getSource(o.source),r=i.serialize(),a=o.serialize(),s=Boolean(O.getMapboxLayerById(a.id,t.layers));r&&(t.sources[i.id]=r),a&&!s&&t.layers.push(a)}})},e.prototype.listenMapEvents=function(){var t=this,e=function(){if(t.initStatus){t.indoorLayer||(t.indoorLayer=new M.IndoorLayer);var e=t.getMapType().uid,n=p.Mantle.NaverStyleMapTypeOptions.getSatelliteMap().uid,o=p.Mantle.NaverStyleMapTypeOptions.getHybridMap().uid;if(e===n||e===o)return t.indoorLayer.setIndoorGroundObject(null),void t.indoorLayer.setMap(null);t.indoorLayer.setMap(t)}};this.mapListeners=[p.Mantle.Event.addListener(this,"init_stylemap",function(n){n&&!n.isFailed&&(t.initCustomObjects2D(),e())}),p.Mantle.Event.addListener(this,"mapType_changed",function(){e()}),p.Mantle.Event.addListener(this,"addLayer",function(e){t.indoorLayer&&e.name===f.LAYER_TYPE.STREET&&t.indoorLayer.updateIndoor()}),p.Mantle.Event.addListener(this,"removeLayer",function(e){t.indoorLayer&&e===f.LAYER_TYPE.STREET&&t.indoorLayer.updateIndoor()}),p.Mantle.Event.once(this,"tilesloaded",function(){e()})]},e.prototype.listenMapEventsGL=function(){var t=this,e=function(){t.indoorLayer||(t.indoorLayer=new T.IndoorLayerGL);var e=t.getMapType().uid,n=p.Mantle.NaverVectorMapTypeOptions.getSatelliteMap().uid,o=p.Mantle.NaverVectorMapTypeOptions.getHybridMap().uid;e!==n&&e!==o?t.indoorLayer.getMap()?t.indoorLayer.refresh():t.indoorLayer.setMap(t):t.indoorLayer.setMap(null)};this.mapListeners=[p.Mantle.Event.addListener(this,"init_stylemap",function(n){n&&!n.isFailed&&(t.initCustomObjectsGL(),e())}),p.Mantle.Event.addListener(this,"mapType_changed",function(){e()}),p.Mantle.Event.addListener(this,"addLayer",function(e){t.indoorLayer&&e.name===f.LAYER_TYPE.STREET&&t.indoorLayer.updateIndoor()}),p.Mantle.Event.addListener(this,"removeLayer",function(e){t.indoorLayer&&e===f.LAYER_TYPE.STREET&&t.indoorLayer.updateIndoor()})]},e.prototype.unlistenMapEvents=function(){p.Mantle.Event.removeListener(this.mapListeners)},e.prototype._destroy2D=function(){this.unlistenMapEvents();var t=this._mapAction;t&&(t.destroy(),delete this._mapAction),this.mapPane&&(this._mapPane2D=this.mapPane),this.picker&&(this.picker.destroy(),this.picker=null),this.indoorLayer&&(this.indoorLayer.setMap(null),this.indoorLayer=null)},e.prototype._destroyGL=function(t){var e=this;this.unlistenMapEvents();var n=this._mapbox;if(n){var o=Math.round(this._mapModel.get("zoom")),i=function(){n.off("move",e._boundOnMapboxMove),delete e._boundOnMapboxMove;var i=e._mapView,r=e._mapAction,a=e._overlayManager;r&&(r.destroy(),delete e._mapAction),a&&(a.destroy(),delete e._overlayManager),i&&i.setMapbox&&i.setMapbox(null),e.indoorLayer&&(e.indoorLayer.setMap(null),e.indoorLayer=null),e._mapModel.setMapbox(null),e._mapModel.set("zoom",o+f.ZOOM_DIFF,!0),n.scrollZoom.disable(),t&&t()};0!==this.getRotation()||0!==this.getTilt()?(n.once("moveend",i),this.morph(this.getCenter(),o,{duration:500,animate:!0,rotation:0,tilt:0})):i()}else t&&t()},e.prototype._extendProjection=function(){var t=this.get("mapSystemProjection");if(t){var e=this._mapView;t.fromPageXYToOffset=function(t){var n=e.getMapOffset();return t.clone().sub(n).sub(this.get("containerTopLeft"))},t.fromPageXYToPoint=function(t){var e=this.fromPageXYToOffset(t);return this.fromOffsetToPoint(e)},t.fromPageXYToCoord=function(t){var e=this.fromPageXYToOffset(t);return this.fromOffsetToCoord(e)}}},e.mixin=function(){e.mixed||(u.mixin(p.Mantle.Map,e),p.Mantle.Map.prototype.switchTo=e.prototype.switchTo,p.Mantle.Map.prototype.initStyleMap=e.prototype.initStyleMap,p.Mantle.Map.prototype._loadStyleMapMeta=e.prototype._loadStyleMapMeta,p.Mantle.Map.prototype._updateStyleMapTypeOption=e.prototype._updateStyleMapTypeOption,p.Mantle.Map.prototype._initMapOptions=e.prototype._initMapOptions,p.Mantle.Map.prototype._addCopyrightControls=e.prototype._addCopyrightControls,p.Mantle.Map.prototype.setZoom=e.prototype.setZoom,p.Mantle.Map.prototype.getZoom=e.prototype.getZoom,p.Mantle.Map.prototype.getMinZoom=e.prototype.getMinZoom,p.Mantle.Map.prototype.getMaxZoom=e.prototype.getMaxZoom,p.Mantle.Map.prototype.updateBy=e.prototype.updateBy,p.Mantle.Map.prototype.morph=e.prototype.morph,e.mixed=!0)},e.mixed=!1,e}(p.Mantle.Map);e.MapGL=P},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.MapActionGL=void 0;var r=n(0),a=n(2),s=n(1),p=n(19).bezier(0,0,.3,1),l=function(t){function e(e){var n=t.call(this,e)||this;n.filterLayers=[],r.Mantle.forEach(s.OVERLAY_BUBBLING_EVENTS,function(t){n._listeningEvents[t]=!0});var o=e.get("disableRotateTilt");return e.set("disableRotateTilt",!r.Mantle.hasValue(o)||o),n.bindTo(["scrollWheel","disableDoubleClickZoom","disableRotateTilt"],e),n}return i(e,t),e.prototype.destroy=function(){this._unlistenMapbox(),t.prototype.destroy.call(this)},e.prototype.setMapModel=function(e){t.prototype.setMapModel.call(this,e),this.bindTo("mapbox",e),this._listenMapbox()},e.prototype.addFilterLayer=function(t){var e=this,n=Array.isArray(t)?t:[t];r.Mantle.forEach(n,function(t){e.filterLayers.indexOf(t)<0&&e.filterLayers.push(t)})},e.prototype.removeFilterLayer=function(t){var e=this,n=Array.isArray(t)?t:[t];r.Mantle.forEach(n,function(t){var n=e.filterLayers.indexOf(t);n>=0&&e.filterLayers.splice(n,1)})},e.prototype.panToBounds=function(t){var e=this.get("mapbox");e&&e.fitBounds([t.minX(),t.minY(),t.maxX(),t.maxY()],{linear:!0})},e.prototype.panTo=function(t,e){var n=this.get("mapbox");n&&(r.Mantle.Event.trigger(this,"panning"),n.panTo(t.toLngLat(),e))},e.prototype.panBy=function(t,e,n){var o=this.get("mapbox");o&&o.panBy([t.x,t.y],r.Mantle.extend({animate:!1},e),n)},e.prototype.zoomBy=function(t,e,n){var o=this.get("zoom")+t;return e=e?r.Mantle.box(e,r.LatLng):this.get("center"),this.easeTo({around:e,zoom:o,animate:!!n}),!0},e.prototype.jumpTo=function(t){this._mapModel&&this._mapModel.jumpTo(t)},e.prototype.easeTo=function(t){var e=this.get("mapbox");e&&e.easeTo(a.toMapboxCameraOptions(t))},e.prototype.stopEasing=function(){var t=this.get("mapbox");t&&t.stop()},e.prototype.handleEvent=function(t,e){e=e||t.type;var n=!t;if(t&&this._listeningEvents[e]&&(n=!0),n){var o=[e],i=null;if(t&&(i=this._getPointerEvent(t,e),o.push(i)),i&&this.filterLayers&&this.filterLayers.length>0&&s.OVERLAY_BUBBLING_EVENTS.indexOf(e)>=0){var a=this.get("mapbox"),p=i.offset,l=a.queryRenderedFeatures([p.x,p.y],{layers:this.filterLayers});if(l&&l.length>0){var u=s.OVERLAY_BUBBLING_EVENTS_MAPPER[e];o[0]=u,o[1].type=u}}i&&r.Mantle.Agent.mobile&&"click"===e&&this._triggerTap(i),this.trigger.apply(this,o)}},e.prototype.isZooming=function(){return!1},e.prototype.containerTopLeft_changed=function(t){},e.prototype.zoomingBy=function(){},e.prototype.initZoomEffector=function(){},e.prototype._listenMapbox=function(){var t=this,e=this.get("mapbox");if(e){var n=this.handleEvent.bind(this),o=function(o,i){var r=i?i.bind(t):n;return e.on(o,r),{type:o,listener:r}};this._mapboxListeners=[o("webglcontextlost"),o("webglcontextrestored"),o("touchcancel"),o("render"),o("error"),o("load"),o("idle"),o("movestart"),o("move"),o("moveend"),o("zoomstart",this._onZoomStart),o("dragend"),o("dragstart"),o("drag")]}},e.prototype._getTransform=function(){var t=this.get("mapbox");if(t)return t.transform},e.prototype._transformSetLocationAtPoint=function(t,e){var n=this._getTransform();if(n){var o=t.toPointGeometry?t.toPointGeometry():t,i=e.toPointGeometry?e.toPointGeometry():e;n.setLocationAtPoint(o,i)}},e.prototype._transformPointLocation=function(t){var e=this._getTransform();if(e)return e.pointLocation(t.toPointGeometry?t.toPointGeometry():t)},e.prototype._transformScaleZoom=function(t){var e=this._getTransform();return e&&e.scaleZoom(t)||1},e.prototype._unlistenMapbox=function(){var t=this.get("mapbox");if(t){var e=this._mapboxListeners;if(e){for(var n=0,o=e;n<o.length;n++){var i=o[n];t.off(i.type,i.listener)}this._mapboxListeners=[]}}},e.prototype._getPointerEvent=function(e,n){var o=e.target===this.get("mapbox")?e:null,i=null;if(o&&"lngLat"in o)(i={}).type=o.type,i.originalEvent=o.originalEvent,o.type&&0===o.type.indexOf("key")?i.keyboardEvent=i.originalEvent:(i.pointerEvent=o.originalEvent,i.offset=o.point,i.coord=o.lngLat.toLatLng(),i.latlng=i.coord.clone(),i.point=this.get("mapSystemProjection").fromCoordToPoint(i.coord));else{if(o)if(o.originalEvent)(i=t.prototype._getPointerEvent.call(this,o.originalEvent,n)).originalEvent=o.originalEvent;else for(var r in i={},o)"target"!==r&&(i[r]=o[r]);else i=t.prototype._getPointerEvent.call(this,e,n);if(!i)return e;delete i.domEvent}return i},e.prototype.__fireMapboxEvent=function(t,e){var n=this.get("mapbox");if(!n)return n;n.fire(e||t.type,{originalEvent:t})},e.prototype._isRotateAction=function(t){if(this.get("disableRotateTilt"))return!1;var e=t.which,n=this.get("shiftKey");return n&&e===r.DOMEvent.MOUSE_LBUTTON||!n&&e===r.DOMEvent.MOUSE_RBUTTON},e.prototype._onUp=function(e){this._dragTilting&&this.handleEvent(e,"tiltend"),this._dragRotating&&this.handleEvent(e,"rotateend"),t.prototype._onUp.call(this,e)},e.prototype._onDblClick=function(t){if(this.handleEvent(t,"dblclick"),!this.get("disableDoubleClickZoom")){var e=this.get("mapSystemProjection"),n=this._getZoomOrigin(t);this.zoomBy(1,e.fromOffsetToCoord(n),!0)}},e.prototype._initDrag=function(){t.prototype._initDrag.call(this),delete this._startPoint,delete this._startTilt,delete this._startRotation,this._dragRotating=!1,this._dragTilting=!1,this._inertia=null},e.prototype._drainInertiaBuffer=function(){var t=this._inertia;if(t)for(var e=Date.now();t.length>0&&e-t[0][0]>160;)t.shift()},e.prototype._getMouseOffset=function(t){return r.DOM.mousePos(this._mapView.get("mapDiv"),t)},e.prototype._onDragReady=function(t){if(!this._prevPinch&&!this.isTranRunning("pinch")){this.kineticPan(null),this._down&&this._initDrag(),this._down=!0;var e=this._getMouseOffset(t);this._startPoint=e.clone(),this._startTilt=this.get("tilt"),this._startRotation=this.get("rotation"),this._dragTilting=!1,this._dragRotating=!1,this._inertia=[[Date.now(),e.toPointGeometry()]]}},e.prototype._onDrag=function(t){if(this._down){var e=this._getMouseOffset(t);this._isRotateAction(t)?this._rotateOrTilt(t):this._drag(t),this._drainInertiaBuffer(),this._inertia.push([Date.now(),e.toPointGeometry()])}},e.prototype._onDragEnd=function(t){var e=this;this.__fireMapboxEvent(t,"dragend"),this._drainInertiaBuffer();var n=function(){e.__fireMapboxEvent(t,"moveend")},o=this._inertia;if(o.length<2)n();else{var i=o[o.length-1],r=o[0],a=i[1].sub(r[1]),s=(i[0]-r[0])/1e3;if(0===s||i[1].equals(r[1]))n();else{var l=a.clone().mult(.3/s),u=l.mag();u>1400&&(u=1400,l._unit()._mult(u));var c=u/750,h=l.mult(-c/2);this.panBy(h,{animate:!0,duration:1e3*c,easing:p},{originalEvent:t}),this._initDrag()}}},e.prototype._drag=function(t){var e=this._getMouseOffset(t).clone(),n=this._inertia[this._inertia.length-1][1],o=new r.Point(n.x,n.y);if(!this._isMapDragging){if(o=this._startPoint.clone(),r.Mantle.Math.distance(o,e)<s.DRAG_THRESHOLD)return;this.__fireMapboxEvent(t,"dragstart"),this.__fireMapboxEvent(t,"movestart"),this._isMapDragging=!0}this.stopEasing(),this._transformSetLocationAtPoint(this._transformPointLocation(o.toPointGeometry()),e.toPointGeometry()),this.__fireMapboxEvent(t,"drag"),this.__fireMapboxEvent(t,"move")},e.prototype._rotateOrTilt=function(t){var e=this._getMouseOffset(t),n=e.clone(),o=this._inertia[this._inertia.length-1][1],i=new r.Point(o.x,o.y),a=n.clone().sub(i);a.x=(a.x>0?1:-1)*Math.min(Math.abs(a.x),10);var p=this.get("tilt");p=Math.min(s.MAX_TILT,Math.max(s.MIN_TILT,p-a.y));var l=this.get("size").height/2;e.y<l&&(a.x*=-1);var u=this.get("rotation");u+=a.x;var c=this._startTilt!==p,h=this._startRotation!==u;!this._dragTilting&&c&&(this._dragTilting=!0,this.handleEvent(t,"tiltstart")),c&&this.handleEvent(t,"tilt"),!this._dragRotating&&h&&(this._dragRotating=!0,this.handleEvent(t,"rotatestart")),h&&this.handleEvent(t,"rotate"),this.jumpTo({tilt:p,rotation:u})},e.prototype._onWheel=function(t){this.handleEvent(t,"mousewheel")},e.prototype._onPinchStart=function(e){var n=this._getTransform();n&&(this._startScale=n.scale,this._startRotation=n.bearing,this._startPinchRotation=this.get("rotation"),this._pinchRotating=!1,t.prototype._onPinchStart.call(this,e))},e.prototype._onPinch=function(e){if(this._prevPinch){var n={zoom:this._transformScaleZoom(this._startScale*e.scale),rotation:this._startRotation+e.rotation,animate:!1};e.center&&(n.around=this.get("mapSystemProjection").fromOffsetToCoord(e.center)),this.easeTo(n);var o=this._startPinchRotation!==this.get("rotation");!this._pinchRotating&&o&&(this._pinchRotating=!0,this.handleEvent(e,"rotatestart")),o&&this.handleEvent(e,"rotate"),t.prototype._onPinch.call(this,e)}},e.prototype._onPinchEnd=function(e){this._pinchRotating&&this.handleEvent(e,"rotateend"),delete this._startScale,delete this._startRotation,delete this._startPinchRotation,this._pinchRotating=!1,t.prototype._onPinchEnd.call(this,e)},e.prototype._onTilt=function(e){if(this._tiltCenter&&e.center){var n=this._tiltCenter.y-e.center.y,o=this.get("tilt");o+=n/1.5,o=Math.min(s.MAX_TILT,Math.max(s.MIN_TILT,o+n/3)),this.easeTo({tilt:o,animate:!1}),t.prototype._onTilt.call(this,e)}},e.prototype._onZoomStart=function(t){this.handleEvent(t,"zooming")},e.prototype._onTwoFingerTap=function(t){if(this.handleEvent(t,"twofingertap"),!this.get("disableTwoFingerTapZoom")){var e=this.get("mapSystemProjection"),n=this._getZoomOrigin(t);this.zoomBy(1,e.fromOffsetToCoord(n),!0)}},e.prototype._onDoubleTap=function(t){if(this.handleEvent(t,"doubletap"),!this.get("disableDoubleTapZoom")){var e=this.get("mapSystemProjection"),n=this._getZoomOrigin(t);this.zoomBy(1,e.fromOffsetToCoord(n),!0)}},e.prototype._onLongTap=function(t){this.handleEvent(t,"longtap")},e.prototype._onKeyTransition=function(t){this.panBy(t.clone().mul(2,2))},e.prototype.scrollWheel_changed=function(t){var e=this.get("mapbox");if(e){var n=e.scrollZoom;t?n.enable():n.disable()}},e}(r.Mantle.MapAction);e.MapActionGL=l,r.Mantle.MapActionGL=l},function(t,e,n){"use strict";function o(t,e,n,o){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(o-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=n,this.p2y=o}Object.defineProperty(e,"__esModule",{value:!0}),e.bezier=void 0,e.bezier=function(t,e,n,i){var r=new o(t,e,n,i);return function(t){return r.solve(t)}},o.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var n,o,i=t,r=0;r<8;r++){if(n=this.sampleCurveX(i)-t,Math.abs(n)<e)return i;if(o=this.sampleCurveDerivativeX(i),Math.abs(o)<1e-6)break;i-=n/o}var a=0,s=1;i=t;for(r=0;r<20&&(n=this.sampleCurveX(i),!(Math.abs(n-t)<e));r++)t>n?a=i:s=i,i=.5*(s-a)+a;return i},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}}},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.OverlayGLManager=void 0;var r=n(0),a=n(1),s=function(t){function e(){var e=t.call(this)||this;return e._overlayIds=[],e._listeners=[],e._queue=[],e}return i(e,t),e.prototype.ready=function(t){this._map=t,this._initEvent(),this.flush()},e.prototype.flush=function(){var t=this;this._queue.forEach(function(e){return t.add(e)}),this._queue=[]},e.prototype.destroy=function(){var t=this;r.Mantle.Event.removeListener(this._listeners),this._overlayIds.forEach(function(e){t.get(e).remove(),t.set(e,null)}),this._map=null,this._overlayIds=[]},e.prototype.add=function(t){if(this._map){var e=t.getId(),n=t.getLayerIds(),o=this.getOrderIndex(e,t);if(this.getIndex(e)>-1)throw new Error("Id: should be UNIQUE");this._overlayIds.splice(o,0,e),this.set(e,t),this.setRefLayerId(o),t.draw(),this._map.getMapAction().addFilterLayer(n)}else this._queue.push(t)},e.prototype.update=function(t){var e=this.getIndex(t);this._overlayIds.splice(e,1);var n=this.getOrderIndex(t);this._overlayIds.splice(n,0,t),e!==n&&(this.setRefLayerId(n),this.get(this.getId(n)).rearrange())},e.prototype.remove=function(t){var e=this.getIndex(t);if(!(e<0)){this._overlayIds.splice(e,1);var n=this.get(t),o=n.getLayerIds();this._map.getMapAction().removeFilterLayer(o),n.remove(),this.set(t,null)}},e.prototype.setRefLayerId=function(t){var e,n=this.get(this.getId(t)),o=this.get(this.getId(t+1));o&&(e=o.getLayerIds()[0]),n.set("refLayerId",e)},e.prototype.getIndex=function(t){return this._overlayIds.findIndex(function(e){return e===t})},e.prototype.getOrderIndex=function(t,e){var n=this,o=e||this.get(t),i=this._overlayIds.findIndex(function(t){return n.get(t).get("zIndex")>o.get("zIndex")});return i<0?this._overlayIds.length:i},e.prototype.getId=function(t){return this._overlayIds[t]},e.prototype.has=function(t){for(var e=0,n=this._overlayIds.length;e<n;){if(this._overlayIds[e]===t)return!0;e+=1}return!1},e.prototype.getAllLayerIds=function(){var t=this,e=[];return this._overlayIds.forEach(function(n){e=e.concat(t.get(n).getLayerIds())}),e},e.prototype._initEvent=function(){var t=this;a.OVERLAY_BUBBLING_EVENTS.concat(["mousedown","mousemove","mouseup","touchstart","touchend"]).forEach(function(e){var n=a.OVERLAY_BUBBLING_EVENTS_MAPPER[e]||e;t._listeners.push(t._map.addListener(n,t._getListener(e)))})},e.prototype._getListener=function(t){var e=this,n=null,o=!1;return function(i){if(!(e._overlayIds.length<1)){a.OVERLAY_BUBBLING_EVENTS_MAPPER[t]&&(i.type=t);var r=e.getAllLayerIds(),s=e._map.getMapbox().queryRenderedFeatures([i.offset.x,i.offset.y],{layers:r})||[],p=s.length>0?s[0].properties.__overlayId:"",l=p&&e.get(p),u=l&&l.getClickable();if("mousemove"===t){var c=void 0,h=void 0;n&&!p?c=e.get(n):!n&&p?h=l:n&&p&&n!==p&&(c=e.get(n),h=l),c&&c.getClickable()&&c.trigger("mouseout",i),h&&h.getClickable()&&h.trigger("mouseover",i),n=p}if(!u){var d=e._map.getCursor();return!o||"open"!==d&&"closed"!==d&&"pointer"!==d||(o=!1,e._map.setCursor("open")),void(a.OVERLAY_BUBBLING_EVENTS_MAPPER[t]&&e._map.trigger(t,i))}e._map.setCursor("pointer"),o=!0,i.data=s[0].toJSON(),e.get(p).trigger(t,i)}}},e}(r.Mantle.KVO);e.OverlayGLManager=s},function(t,e,n){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.MapTilePicker=void 0;var i=n(0),r=n(4),a=n(3),s=n(22),p=o(n(7)),l=n(1),u=function(){function t(t){this.DEBOUNCE_TIME=500,this.FILE_FORMAT="json",this.INDOOR_MAP_TYPE="indoor",this.CRS_TYPE="EPSG:4326",this.CACHE_SIZE=128,this.LAYER_PRIORITY=["INDOOR_POI","CCTV","PANORAMA","TRANSIT","POI"],this.map=null,this.indoorGroundInfo=null,this.features=null,this.cacheMap={},this.cacheArray=[],this.tree=null,this.map=t,this.tree=new p.default,this.listenMapEvents(),this.update()}return t.prototype.destroy=function(){this.clear(),this.cacheMap=null,this.cacheArray=null,this.map&&(this.unlistenMapEvents(),this.map=null)},t.prototype.queryFeatures=function(t){var e=this,n=this.tree.search({minX:t.x,minY:t.y,maxX:t.x,maxY:t.y});if(!n||0===n.length)return null;for(var o=[],i=[],r=n.length,a=0;a<r;a+=1){var s=n[a];i.indexOf(s.id)<0&&(i.push(s.id),o.push(s))}return this.findFeatures(o).sort(function(t,n){return e.LAYER_PRIORITY.indexOf(t.source)-e.LAYER_PRIORITY.indexOf(n.source)})},t.prototype.setIndoorInfo=function(t,e){this.indoorGroundInfo={zone:t,zorder:e},this.update()},t.prototype.clearIndoorInfo=function(){this.indoorGroundInfo=null},t.prototype.findFeatures=function(t){if(!this.features)return null;for(var e=[],n=t.length,o=this.features.length,i=0;i<n;i+=1)for(var r=t[i].id,a=0;a<o;a+=1){var s=this.features[a],p=Boolean(this.indoorGroundInfo)||!this.indoorGroundInfo&&"INDOOR_POI"!==s.source;s.properties.id===r&&p&&e.push(s)}return e},t.prototype.listenMapEvents=function(){var t=this,e=function(){t.update()};this.mapListeners=[i.Mantle.Event.addListener(this.map.getMapAction(),"idle",s.debounce(e,this.DEBOUNCE_TIME,!1)),i.Mantle.Event.addListener(this.map,"mapType_changed",e),i.Mantle.Event.addListener(this.map,"addLayer",e),i.Mantle.Event.addListener(this.map,"removeLayer",e)]},t.prototype.unlistenMapEvents=function(){i.Mantle.Event.removeListener(this.mapListeners)},t.prototype.clear=function(){this.features=null,this.tree.clear()},t.prototype.update=function(){var t=this;this.clear();var e=this.map.getMapModel(),n=e.get("tileIndexArray").get("indexes");if(n&&0!==n.length){var o=this.getLayerOverlayQuery();if(o){var i=this.FILE_FORMAT,a=e.get("zoom"),s=this.getCrsQuery(),p=this.map.getMapTypeId(),l=this.getMapTypeName(p),u=this.getMapTypeTileVersion(p),c=[];n.forEach(function(e){var n=e.xIndex,p=e.yIndex,h=a,d=r.ServerConfig.getPath(r.PathType.TILE_PICKER,{x:n,y:p,z:h,format:i,tileVersion:u,type:l});if(d+="?"+o+"&"+s,c.push(t.loadPickerData(d)),t.indoorGroundInfo){var f=t.getIndoorGroundQuery(),y=r.ServerConfig.getPath(r.PathType.TILE_PICKER,{x:n,y:p,z:h,format:i,tileVersion:u,type:t.INDOOR_MAP_TYPE});y+="?"+f+"&"+s,c.push(t.loadPickerData(y))}}),Promise.all(c).then(function(e){e&&0!==e.length&&(t.updateFeatures(e),t.updateTree())})}}},t.prototype.loadPickerData=function(t){if(this.cacheMap[t]){var e=this.cacheMap[t];return Promise.resolve(e)}return a.FileLoader.loadJSON(t,this.addPickerApiData.bind(this))},t.prototype.addPickerApiData=function(t,e){if(!this.cacheMap[t])for(e.key=t,this.cacheMap[t]=e,this.cacheArray.push(e);this.cacheArray.length>this.CACHE_SIZE;){var n=this.cacheArray.splice(0,1)[0];this.cacheMap[n.key]=void 0,delete this.cacheMap[n.key]}},t.prototype.updateFeatures=function(t){for(var e=[],n=t.length,o=0;o<n;o++)e.push.apply(e,t[o].features);this.features=this.getUniqueFeatures(e)},t.prototype.updateTree=function(){var t=[];i.Mantle.forEach(this.features,function(e){var n=e.boundary,o=e.properties;n&&o.id&&i.Mantle.forEach(n,function(n){var o=n.bbox,i={id:e.properties.id,minX:o[0],minY:o[1],maxX:o[2],maxY:o[3]};t.push(i)})}),this.tree.load(t)},t.prototype.getUniqueFeatures=function(t){for(var e=[],n=[],o=t.length,i=0;i<o;i+=1){var r=t[i],a=r.properties.id;e.indexOf(a)>=0||(n.push(r),e.push(a))}return n},t.prototype.getIndoorGroundQuery=function(){return"zone="+this.indoorGroundInfo.zone+"&zorder="+this.indoorGroundInfo.zorder},t.prototype.getCrsQuery=function(){return"crs="+this.CRS_TYPE},t.prototype.getLayerOverlayQuery=function(){var t=this.map.getMapType().uid===i.Mantle.NaverStyleMapTypeOptions.getSatelliteMap().uid||this.map.layers.cadastral?[]:[l.STYLE_MAP_OVERLAY_TYPE.TRANSIT,l.STYLE_MAP_OVERLAY_TYPE.POI_KOREAN],e=this.map.layers.getLayerNames();if(!e||0===e.length)return t.length>0?"mt="+t.join("."):null;for(var n=[],o=e.length,r=0;r<o;r+=1){var a="";switch(e[r]){case"street":a=l.STYLE_MAP_OVERLAY_TYPE.PANORAMA;break;case"cctv":a=l.STYLE_MAP_OVERLAY_TYPE.CCTV}a&&n.push(a)}var s=t.concat(n).sort(function(t,e){return l.OVERLAY_TYPE_ORDER_SEQUENCE.indexOf(t)-l.OVERLAY_TYPE_ORDER_SEQUENCE.indexOf(e)});return s.length>0?"mt="+s.join("."):null},t.prototype.getMapTypeName=function(t){var e;switch(t){case"normal":e=i.Mantle.NaverStyleMapTypeOptions.getNormalMap();break;case"terrain":e=i.Mantle.NaverStyleMapTypeOptions.getTerrainMap();break;case"satellite":e=i.Mantle.NaverStyleMapTypeOptions.getSatelliteMap();break;case"hybrid":e=i.Mantle.NaverStyleMapTypeOptions.getHybridMap()}return e.getOptions().tileType},t.prototype.getMapTypeTileVersion=function(t){var e;switch(t){case"normal":e=l.STYLE_TILE_TYPE_BASIC;break;case"terrain":e=l.STYLE_TILE_TYPE_TERRAIN;break;case"satellite":case"hybrid":e=l.STYLE_TILE_TYPE_SATELLITE}return this.map.getTileMapMeta(e).version},t}();e.MapTilePicker=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.debounce=void 0,e.debounce=function(t,e,n){var o,i,r,a,s;function p(){var l=Date.now()-a;l<e&&l>=0?o=setTimeout(p,e-l):(o=null,n||(s=t.apply(r,i),r=i=null))}return null==e&&(e=100),function(){r=this,i=arguments,a=Date.now();var l=n&&!o;return o||(o=setTimeout(p,e)),l&&(s=t.apply(r,i),r=i=null),s}}},function(t,e,n){"use strict";function o(t,e,n){var o=t[e];t[e]=t[n],t[n]=o}function i(t,e){return t<e?-1:t>e?1:0}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,r,a){!function t(e,n,i,r,a){for(;r>i;){if(r-i>600){var s=r-i+1,p=n-i+1,l=Math.log(s),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(s-u)/s)*(p-s/2<0?-1:1),h=Math.max(i,Math.floor(n-p*u/s+c)),d=Math.min(r,Math.floor(n+(s-p)*u/s+c));t(e,n,h,d,a)}var f=e[n],y=i,_=r;for(o(e,i,n),a(e[r],f)>0&&o(e,i,r);y<_;){for(o(e,y,_),y++,_--;a(e[y],f)<0;)y++;for(;a(e[_],f)>0;)_--}0===a(e[i],f)?o(e,i,_):o(e,++_,r),_<=n&&(i=_+1),n<=_&&(r=_-1)}}(t,e,n||0,r||t.length-1,a||i)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pointInPolygon=void 0,e.pointInPolygon=function(t,e,n){var o=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,r=e.length-1;i<e.length;r=i++){var a=e[i][0],s=e[i][1],p=e[r][0],l=e[r][1];if(t[1]*(a-p)+s*(p-t[0])+l*(t[0]-a)==0&&(a-t[0])*(p-t[0])<=0&&(s-t[1])*(l-t[1])<=0)return!n;s>t[1]!=l>t[1]&&t[0]<(p-a)*(t[1]-s)/(l-s)+a&&(o=!o)}return o}},function(t,e,n){"use strict";var o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),i=0;for(e=0;e<n;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,i++)o[i]=r[a];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.MapScreenshot=void 0;var i=n(1),r=n(0),a=function(){function t(t){this.HTML2CANVAS_JS_URL="https://map.pstatic.net/res/file/content/global/static/naver/js/html2canvas/html2canvas.min.js",this.CANVG_JS_URL="https://map.pstatic.net/res/file/content/global/static/naver/js/canvg/canvg@3.0.7.js",this.map=null,this.map=t}return t.prototype.getMapCanvas=function(t,e){if(this.map){return(this.map.get("renderMode")===i.RENDER_MODE_2D?this.mantleToCanvas.bind(this):this.mapboxToCanvas.bind(this))().then(function(e){if(!t)return e;var n=t.getMin(),o=t.getMax(),r=(o.x-n.x)*i.DEVICE_PIXEL_RATIO,a=(o.y-n.y)*i.DEVICE_PIXEL_RATIO;if(0===r||0===a)return e;var s=e.getContext("2d").getImageData(n.x*i.DEVICE_PIXEL_RATIO,n.y*i.DEVICE_PIXEL_RATIO,r,a),p=document.createElement("canvas"),l=p.getContext("2d");return p.width=r,p.height=a,l.putImageData(s,0,0),p}).then(function(t){return e?function(t){return new Promise(function(e){return t.msToBlob?e(t.msToBlob()):t.toBlob(e)})}(t).then(function(t){return t}):t.toDataURL("image/png")})}},t.prototype.mantleToCanvas=function(){var t=this;return this.loadLibraries().then(function(){var e=t.map.getElement(),n=e.offsetWidth,r=e.offsetHeight,a=document.createElement("canvas"),s=a.getContext("2d"),p=n*i.DEVICE_PIXEL_RATIO,l=r*i.DEVICE_PIXEL_RATIO,u={width:p,height:l};a.width=p,a.height=l;for(var c=t.map.getMapView().get("containerDiv"),h=t.getElementTranslation(c),d=h.x,f=h.y,y=t.map.getMapView().get("tilePane").querySelectorAll("img"),_=y.length,M=0;M<_;M+=1){var g=y[M],v=t.getElementTranslation(g.parentElement),m=v.x,E=v.y,O=g.naturalWidth,L=g.naturalHeight;s.drawImage(g,0,0,O,L,(m+d)*i.DEVICE_PIXEL_RATIO,(E+f)*i.DEVICE_PIXEL_RATIO,O,L)}return new Promise(function(e,n){try{for(var r=t.map.getMapView().get("panes"),p=r.overlayLayer,l=r.overlayImage,c=r.floatPane,h=[],y=o(p.querySelectorAll("svg"),l.querySelectorAll("svg")).sort(function(t,e){var n,o;return parseInt(null!==(n=t.style.zIndex)&&void 0!==n?n:"0",10)-parseInt(null!==(o=e.style.zIndex)&&void 0!==o?o:"0",10)}),_=y.length,M=0;M<_;M+=1){var g=t.svgToString(y[M]),v=g.innerHTML,m=g.offset;h.push(t.svgToCanvas(v,u,m))}Promise.all(h).then(function(n){for(var o=d*i.DEVICE_PIXEL_RATIO,r=f*i.DEVICE_PIXEL_RATIO,p=n.length,h=0;h<p;h+=1){var y=n[h];s.drawImage(y,0,0,y.width,y.height,o,r,a.width*i.DEVICE_PIXEL_RATIO,a.height*i.DEVICE_PIXEL_RATIO)}var _=[t.htmlToCanvas(l,u),t.htmlToCanvas(c,u)];Promise.all(_).then(function(t){for(var n=t.length,i=0;i<n;i+=1){var p=t[i],l=p.width,u=p.height;s.drawImage(p,0,0,l,u,o,r,l,u)}e(a)})})}catch(t){n(t)}})})},t.prototype.mapboxToCanvas=function(){var t=this;return this.loadLibraries().then(function(){var e=t.map.getElement(),n=e.offsetWidth,r=e.offsetHeight,a=document.createElement("canvas"),s=a.getContext("2d"),p=n*i.DEVICE_PIXEL_RATIO,l=r*i.DEVICE_PIXEL_RATIO,u={width:p,height:l};a.width=p,a.height=l;var c=t.map.getMapView().get("containerDiv"),h=t.getElementTranslation(c),d=h.x,f=h.y,y=d*i.DEVICE_PIXEL_RATIO,_=f*i.DEVICE_PIXEL_RATIO;return new Promise(function(e,n){try{var r=t.map.getMapbox();(c=r,new Promise(function(t){c.once("render",function(){t(c.getCanvas().toDataURL())}),c.triggerRepaint()})).then(function(c){var h=new Image;h.onload=function(){var n=r.getCanvas();s.drawImage(h,0,0,n.width,n.height,y,_,p,l);for(var c=t.map.getMapView().get("panes"),M=c.overlayImage,g=c.floatPane,v=[],m=o(M.querySelectorAll("svg")).sort(function(t,e){var n,o;return parseInt(null!==(n=t.style.zIndex)&&void 0!==n?n:"0",10)-parseInt(null!==(o=e.style.zIndex)&&void 0!==o?o:"0",10)}),E=m.length,O=0;O<E;O+=1){var L=t.svgToString(m[O]),T=L.innerHTML,b=L.offset;v.push(t.svgToCanvas(T,{width:p,height:l},b))}Promise.all(v).then(function(n){for(var o=d*i.DEVICE_PIXEL_RATIO,r=f*i.DEVICE_PIXEL_RATIO,p=n.length,l=0;l<p;l+=1){var c=n[l];s.drawImage(c,0,0,c.width,c.height,o,r,a.width*i.DEVICE_PIXEL_RATIO,a.height*i.DEVICE_PIXEL_RATIO)}var h=[t.htmlToCanvas(M,u),t.htmlToCanvas(g,u)];Promise.all(h).then(function(t){for(var n=t.length,i=0;i<n;i+=1){var p=t[i],l=p.width,u=p.height;s.drawImage(p,0,0,l,u,o,r,l,u)}e(a)})})},h.onerror=function(){n()},h.src=c})}catch(t){n(t)}var c})})},t.prototype.getElementTranslation=function(t){var e=r.Mantle.DOM.getTranslate(t),n=e.x,o=e.y;return{x:parseInt(n,10),y:parseInt(o,10)}},t.prototype.loadLibraries=function(){var t=this,e=function(e){var n="html2canvas"===e,o=n?"undefined"!=typeof html2canvas:"undefined"!=typeof canvg,i=n?t.HTML2CANVAS_JS_URL:t.CANVG_JS_URL;return o?Promise.resolve():new Promise(function(t,e){var n=document.createElement("script");n.async=!0,n.src=i,n.onload=function(){return t()},n.onerror=function(){return e()},document.body.appendChild(n)})};return new Promise(function(t,n){try{Promise.all([e("html2canvas"),e("canvg")]).then(function(){t()})}catch(t){n()}})},t.prototype.htmlToCanvas=function(t,e){return html2canvas(t,{width:e.width,height:e.height,scale:i.DEVICE_PIXEL_RATIO,allowTaint:!0,useCORS:!0,backgroundColor:"rgba(0,0,0,0)",ignoreElements:function(t){if(!r.Mantle.Agent.browser.msie)return!1;if("DIV"!==t.tagName)return!1;var e=window.getComputedStyle(t,":before").backgroundImage;return Boolean(e&&"none"!==e)}})},t.prototype.svgToCanvas=function(t,e,n){var o=document.createElement("canvas"),i=o.getContext("2d");return o.width=e.width,o.height=e.height,new Promise(function(e){canvg.Canvg.fromString(i,t,{ignoreMouse:!0,ignoreClear:!0,ignoreAnimation:!0,ignoreDimensions:!0}).render({offsetX:n.x,offsetY:n.y}),e(o)})},t.prototype.svgToString=function(t){var e,n=t.cloneNode(!0);n.removeAttribute("xmlns:xlink");var o=(new XMLSerializer).serializeToString(n),i="static"===n.style.position?null!==(e=t.parentNode.style)&&void 0!==e?e:{left:"0",top:"0"}:n.style,r=i.left,a=i.top;return{innerHTML:o,offset:{x:Math.round(parseFloat(r)),y:Math.round(parseFloat(a))}}},t}();e.MapScreenshot=a},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CadastralLayerGL=void 0;var r=n(0),a=n(2),s=n(11),p=n(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.setMap=function(t){var e=this.getMap();if(t!==e){if(!t||t.isGLReady()){if(this._beforeSetMap(t),t){this.map=t;var n=this.getLayerType(),o=n.getMapTypeOptions?n.getMapTypeOptions():null;o&&(o.map=t),this.renderCadastralLayer(!0),this._addToMap(t)}else e&&(this.renderCadastralLayer(!1),this._destroy());return this.set("map",t),this._afterSetMap(t),!0}t.addListenerOnce("glReady",this.setMap.bind(this,t))}},e.prototype.renderCadastralLayer=function(t){if(this.map){var e=this.map.getMapType().getMapTypeStyle(),n=e.metadata,o=e.name,i=this.map.getMapbox(),a=i.getStyle().layers,l=s.getMetadataCategoriesByMapType(o,n);r.Mantle.forEach(a,function(e){if(e.metadata&&e.metadata.group){var n=e.metadata.group,o=e.source;l.default.indexOf(n)>=0||o===p.MapboxSource.POI||o===p.MapboxSource.BUS?i.setLayoutProperty(e.id,"visibility",t?"none":"visible"):l.landparcel.indexOf(n)>=0&&i.setLayoutProperty(e.id,"visibility",t?"visible":"none")}})}},e.mixin=function(){e.mixed||(a.mixin(r.Mantle.CadastralLayer,e),r.Mantle.CadastralLayer.prototype.setMap=e.prototype.setMap,e.mixed=!0)},e.mixed=!1,e}(r.Mantle.Layer);e.CadastralLayerGL=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapboxSourceIdMap=void 0,e.MapboxSourceIdMap={poi4osm:"POI",cctv:"CCTV",airview:"PANORAMA",bus:"TRANSIT",indoorgnd:"indoorMaster",indoor_poi:"INDOOR_POI"}},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),i=0;for(e=0;e<n;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,i++)o[i]=r[a];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.IndoorLayerGL=void 0;var a=n(2),s=n(1),p=n(0),l=null,u=function(t){function e(){var e=t.call(this)||this;return e.INDOOR_TILE_MAP_SOURCE="tilemap_indoor",e.INDOOR_POI_SOURCE="indoor_poi",e.indoorMasterLayers=[],e.indoorTilePoiLayers=[],e.indoorGroundObject=null,e.indoorGroundHoverID=null,e.indoorGroundSourceInfo=null,e.name="indoor",e._initRegistry({}),e}return i(e,t),e.prototype.showIndoor=function(t,e){var n=this,o=this.map.getMapbox(),i=o.getStyle().layers;l||(l={tile:o.getSource(this.INDOOR_TILE_MAP_SOURCE).tiles[0],poi:o.getSource(this.INDOOR_POI_SOURCE).tiles[0]}),this.setIndoorGroundObject({zone:t,zorder:e}),this.updateIndoorTileSource(),this.updateIndoorPoiSource();var a=r(this.getValidLayerGroupNameList(s.LAYER_TYPE.INDOOR_TILE_MAP),this.getValidLayerGroupNameList(s.LAYER_TYPE.INDOOR_POI));p.Mantle.forEach(i,function(t){if(t.metadata&&t.metadata.group){var e=t.metadata.group;a.indexOf(e)>=0&&(o.setLayoutProperty(t.id,"visibility","visible"),n.indoorTilePoiLayers.push(t))}}),p.Mantle.forEach(this.indoorMasterLayers,function(t){o.setLayoutProperty(t.id,"visibility","none")}),o.triggerRepaint(),this.map.setCursor("open")},e.prototype.hideIndoor=function(){var t=this.map.getMapbox();p.Mantle.forEach(this.indoorTilePoiLayers,function(e){t.setLayoutProperty(e.id,"visibility","none")}),p.Mantle.forEach(this.indoorMasterLayers,function(e){t.setLayoutProperty(e.id,"visibility","visible")}),this.indoorTilePoiLayers=[],this.setIndoorGroundObject(null)},e.prototype.updateIndoor=function(){this.indoorGroundObject&&this.updateIndoorTileSource()},e.prototype.setMap=function(t){var e=this,n=this.getMap();if(t!==n){if(t){this.map=t;var o=this.map.getMapbox(),i=o.getStyle().layers,r=this.getValidLayerGroupNameList(s.LAYER_TYPE.INDOOR_GND);p.Mantle.forEach(i,function(t){if(t.metadata&&t.metadata.group){var n=t.metadata.group;if(r.indexOf(n)>=0){var i=t.id;o.setLayoutProperty(i,"visibility","visible"),o.on("mousemove",i,e.mouseEventHandler.bind(e)),o.on("mouseleave",i,e.mouseEventHandler.bind(e)),e.indoorMasterLayers.push(t)}}}),this._addToMap(t)}else if(n){var a=this.map.getMapbox();p.Mantle.forEach(this.indoorMasterLayers,function(t){var n=t.id;a.off("mousemove",n,e.mouseEventHandler.bind(e)),a.off("mouseleave",n,e.mouseEventHandler.bind(e)),a.setLayoutProperty(n,"visibility","none")}),this.indoorMasterLayers=[],this._destroy()}return!0}},e.prototype.refresh=function(){if(this.map){var t=this.map;this.setMap(null),this.setMap(t)}},e.prototype.mouseEventHandler=function(t){var e=this;if(this.map){var n=this.map.getMapbox(),o=function(){if(e.indoorGroundHoverID&&e.indoorGroundSourceInfo){var t=e.indoorGroundSourceInfo,o=t.source,i=t.sourceLayer;n.setFeatureState({source:o,sourceLayer:i,id:e.indoorGroundHoverID},{hover:!1}),e.indoorGroundHoverID=null}};if(this.indoorGroundObject)o();else if("mousemove"===t.type){if("pointer"!==this.map.getCursor()&&this.map.setCursor("pointer"),!t.features||0===t.features.length)return;var i=t.features[0],r=i.id,a=i.source,s=i.sourceLayer;this.indoorGroundSourceInfo||(this.indoorGroundSourceInfo={source:a,sourceLayer:s}),this.indoorGroundHoverID&&n.setFeatureState({source:a,sourceLayer:s,id:this.indoorGroundHoverID},{hover:!1}),this.indoorGroundHoverID=r,n.setFeatureState({source:a,sourceLayer:s,id:this.indoorGroundHoverID},{hover:!0})}else this.map.setCursor("open"),o()}},e.prototype.setIndoorGroundObject=function(t){this.indoorGroundObject=t},e.prototype.updateIndoorTileSource=function(){var t=this,e=this.map.getMapbox(),n=e.getSource(this.INDOOR_TILE_MAP_SOURCE),o=this.indoorGroundObject,i=o.zone,r=o.zorder,a=!!t.map.layers&&t.map.layers.getLayerNames().indexOf(s.LAYER_TYPE.STREET)>=0;n.tiles=[l.tile+(a?".ps":"")+"&zone="+i+"&zorder="+r];var p=e.style.sourceCaches[this.INDOOR_TILE_MAP_SOURCE];p.clearTiles(),p.update(e.transform)},e.prototype.updateIndoorPoiSource=function(){var t=this.map.getMapbox(),e=t.getSource(this.INDOOR_POI_SOURCE),n=this.indoorGroundObject,o=n.zone,i=n.zorder;e.tiles=[a.composePath(l.poi,{zone:o,zorder:i})];var r=t.style.sourceCaches[this.INDOOR_POI_SOURCE];r.clearTiles(),r.update(t.transform)},e}(n(10).LayerGL);e.IndoorLayerGL=u},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.MapModelGL=void 0;var r=n(0),a=n(30),s=n(2),p=n(1),l=["projectionTopLeft","containerTopLeft","center","centerPoint","zoom"],u=["padding_changed","mapTypeMinZoom_changed","mapTypeMaxZoom_changed","setCenter","getCenter","setCenterPoint","getCenterPoint","setZoom","getZoom","setTilt","getTilt","setRotation","getRotation","getBounds","fitBounds"],c=r.Mantle.MapModel.prototype,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._boundOnMapboxMove=null,e}return i(e,t),e.prototype.setMapbox=function(t){this.set("mapbox",t),t?this.__switchTo(p.RENDER_MODE_GL):this.__switchTo(p.RENDER_MODE_2D)},e.prototype.getMapbox=function(){return this.get("mapbox")},e.prototype.initPrimaryData=function(t){var e,n=t.mapTypes.getSelectedType(),o=n.tileSize||r.Mantle.Size(256,256),i=n.projection||r.Mantle.EmptyProjection,a=t.get("bounds"),s=t.get("maxBounds"),l=this.get("userMinZoom"),u=this.get("userMaxZoom"),c=t.get("center"),h=t.get("zoom");!1===r.Mantle.hasValue(l)&&(l=-1),!1===r.Mantle.hasValue(u)&&(u=100),this.set("tileSize",o),this.set("projection",i),this.set("isTilingSystemChanged",!1),this.set("repeatX",n.repeatX||!1),a&&(e=this.getFitZoomAndCenter(a),h=Math.max(e.zoom,l),c=e.center,t.get("gl")&&(h-=p.ZOOM_DIFF),t.set("bounds",null)),s&&!s.hasPoint(c)&&(e=this.getFitZoomAndCenter(s),h=Math.max(e.zoom,l),c=e.center),l>h&&(h=l),u<h&&(h=u),t.set("zoom",h),t.set("center",c),this.set("zoom",h),this.set("center",c),this.set("centerPoint",this.get("mapSystemProjection").fromCoordToPoint(c)),this.set("tilt",t.get("tilt")),this.set("rotation",t.get("rotation")),this.setProjBounds(this.get("size"),this.get("centerPoint"),h)},e.prototype.padding_changedGL=function(){},e.prototype.mapTypeMinZoom_changedGL=function(t){this.get("mapbox")&&this.get("mapbox").setMinZoom(t)},e.prototype.mapTypeMaxZoom_changedGL=function(t){this.get("mapbox")&&this.get("mapbox").setMaxZoom(t)},e.prototype.setCenterGL=function(t){if(this.get("mapbox")){var e=!1===this.getCenter().equals(t);return e&&this.get("mapbox").setCenter(t.toLngLat()),e}},e.prototype.getCenterGL=function(){if(this.get("mapbox"))return this.get("mapbox").getCenter().toLatLng()},e.prototype.setCenterPointGL=function(t){var e=this.get("mapSystemProjection").fromPointToCoord(t);this.setCenter(e)},e.prototype.getCenterPointGL=function(){return this.get("mapSystemProjection").fromCoordToPoint(this.getCenter())},e.prototype.setZoomGL=function(t){if(this.get("mapbox")){var e=this.getZoom()!==t;return e&&this.get("mapbox").setZoom(t),e}},e.prototype.getZoomGL=function(){if(this.get("mapbox"))return this.get("mapbox").getZoom()},e.prototype.jumpTo=function(t){this.get("mapbox")&&(t=s.toMapboxCameraOptions(t),this.get("mapbox").jumpTo(t))},e.prototype.getBoundsGL=function(){if(this.get("mapbox"))return this.get("mapbox").getBounds().toLatLngBounds()},e.prototype.fitBoundsGL=function(t){if(this.get("mapbox")){var e=this.getBounds();return this.get("mapbox").fitBounds(t.toLngLatBounds()),e.equals(this.getBounds())}},e.prototype.setTiltGL=function(t){this.get("mapbox").setPitch(Math.min(p.MAX_TILT,Math.max(p.MIN_TILT,t)))},e.prototype.getTiltGL=function(){return this.get("mapbox").getPitch()},e.prototype.setRotationGL=function(t){this.get("mapbox").setBearing(t)},e.prototype.getRotationGL=function(){return this.get("mapbox").getBearing()},e.prototype.__switchTo=function(t){var e=this.get("mapbox");if(t===p.RENDER_MODE_GL){this.set("mapSystemProjection",new a.MapSystemProjectionGL(this));for(var n=0,o=u;n<o.length;n++){var i=o[n];this[i]=this[i+"GL"]}e&&(this._boundOnMapboxMove=this._onMapboxMove.bind(this),e.on("move",this._boundOnMapboxMove),this.set("containerTopLeft",new r.Point(0,0)))}else{this.set("containerTopLeft",new r.Point(0,0)),e&&this._boundOnMapboxMove&&(e.off("move",this._boundOnMapboxMove),delete this._boundOnMapboxMove),this.set("mapSystemProjection",new r.Mantle.MapSystemProjection(this));for(var s=0,l=u;s<l.length;s++){var h=l[s];c[h]&&(this[h]=c[h])}}},e.prototype._onMapboxMove=function(){var t=this.getCenter(),e=this.getZoom(),n=this.getBounds();this.update(t,null,e,new r.Point(0,0),!0);for(var o=0,i=l;o<i.length;o++){var a=i[o];this.set(a,this.get(a))}this.set("tilt",this.getTilt()),this.set("rotation",this.getRotation()),this.set("bounds",n)},e.mixin=function(){e.mixed||(s.mixin(r.Mantle.MapModel,e),r.Mantle.MapModel.prototype.initPrimaryData=e.prototype.initPrimaryData,e.mixed=!0)},e.mixed=!1,e}(r.Mantle.MapModel);e.MapModelGL=h},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.MapSystemProjectionGL=void 0;var r=n(0),a=function(t){function e(e){var n=t.call(this,e)||this;return n._mapModel=e,n.bindTo("mapbox",e),n}return i(e,t),e.prototype.fromCoordToOffset=function(t){if(!t)return null;if(t instanceof r.Point){var e=t;t=[e.x,e.y]}else{var n=t;t=[n.lng,n.lat]}var o=this.get("mapbox").project(t);return new r.Point(o.x,o.y)},e.prototype.fromOffsetToCoord=function(t){if(!t)return null;if(t instanceof r.Point){var e=t;t=[e.x,e.y]}var n=this.get("mapbox").unproject(t);return new r.LatLng(n.lat,n.lng)},e.prototype.fromOffsetToPoint=function(t){var e=this.fromOffsetToCoord(t);return this.fromCoordToPoint(e)},e.prototype.fromPointToOffset=function(t){var e=this.fromPointToCoord(t);return this.fromCoordToOffset(e)},e.prototype.getDestinationCoord=function(t,e,n){return new r.Mantle.LatLng(t.y,t.x).destinationPoint(e,n)},e.prototype.getDistance=function(t,e){var n=r.Mantle.Math.radianPerDegree,o=t.y,i=e.y,a=t.x,s=(i-o)*n,p=(e.x-a)*n,l=Math.sin(s/2)*Math.sin(s/2)+Math.cos(o*n)*Math.cos(i*n)*Math.sin(p/2)*Math.sin(p/2);return 6378137*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))},e.prototype.scaleDown=function(t,e){var n=this.factor(e);return t instanceof r.Mantle.Point||t instanceof r.Mantle.Size?t.div(n,n):t/n},e.prototype.scaleUp=function(t,e){var n=this.factor(e);return t instanceof r.Mantle.Point||t instanceof r.Mantle.Size?t.mul(n,n):t*n},e.prototype.factor=function(t){var e=this.get("projection").minZoom||0;return Math.pow(2,t-e)},e}(r.Mantle.MapSystemProjection);e.MapSystemProjectionGL=a},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.MapViewGL=void 0;var r=n(0),a=n(2),s=["getMapOffset","_twoFingerMove"],p=r.Mantle.MapView.prototype,l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.setMapbox=function(t){var e=this.get("containerFillDiv"),n=this.get("containerDiv"),o=this.get("canvas");if(r.DOM.translate(n,new r.Point(0,0)),t){if(!o){o=t.getCanvas();var i=t.getCanvasContainer();i.style.position="relative",i.style.zIndex="10",o.style.zIndex="0",i.appendChild(n),e.appendChild(i),this.set("canvas",o),this.set("canvasContainer",i)}o.style.display="block";for(var a=0,l=s;a<l.length;a++){var u=l[a];this[u]=this[u+"GL"]}}else{o&&(o.style.display="none");for(var c=0,h=s;c<h.length;c++){var d=h[c];p[d]&&(this[d]=p[d])}}this.set("mapbox",t)},e.prototype.getMapOffsetGL=function(){return r.DOM.getOffset(this.get("mapDiv"))},e.prototype._twoFingerMoveGL=function(t){p._twoFingerMove.apply(this,[t]),this._clearPinchTimer()},e.mixin=function(){e.mixed||(a.mixin(r.Mantle.MapView,e),e.mixed=!0)},e.mixed=!1,e}(r.Mantle.MapView);e.MapViewGL=l},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.OverlayViewGL=void 0;var r=n(0),a=n(2),s=n(1),p=["setMap","_bindMap","_unbindMap"],l=r.Mantle.OverlayView.prototype,u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getId=function(){return this._id},e.prototype.getLayerIds=function(){return this._layerIds},e.prototype.getLayerId=function(t){return this._id+"-"+t},e.prototype.hasSource=function(){return Boolean(this._mapbox&&this._mapbox.getSource(this._id))},e.prototype.addSource=function(t,e){this.hasSource()||(this.setOverlayIdProperties(e),this._mapbox.addSource(this._id,{type:t,data:e}))},e.prototype.removeSource=function(){this.hasSource()&&this._mapbox.removeSource(this._id)},e.prototype.updateSource=function(t){this.hasSource()&&(this.setOverlayIdProperties(t),this._mapbox.getSource(this._id).setData(t))},e.prototype.addLayer=function(t,e,n){if(this._mapbox){var o=this.getLayerId(t);if(this._mapbox.getLayer(o))throw new Error("already exist");if(this._mapbox.addLayer({id:o,type:t,source:this._id,layout:e.layout,paint:e.paint},this.get("refLayerId")),this._layerIds.push(o),!n)for(var i=0,r=Object.keys(e.__paint);i<r.length;i++){var a=r[i];this._mapbox.setPaintProperty(o,a+"-transition",{duration:0,delay:0})}}},e.prototype.updateLayerProperty=function(t,e){var n=this.getLayerId(t),o="layout"===e.which?"setLayoutProperty":"setPaintProperty";this._mapbox&&this._mapbox.getLayer(n)&&this._mapbox[o](n,e.key,e.value)},e.prototype.removeAllLayer=function(){var t=this;this._layerIds.forEach(function(e){t.removeLayer(e)}),this._layerIds=[]},e.prototype.removeLayer=function(t){this._mapbox&&this._mapbox.getLayer(t)&&this._mapbox.removeLayer(t)},e.prototype.setMapGL=function(t){t||(t=null),t&&t.get("renderMode")===s.RENDER_MODE_2D?this.switchTo(s.RENDER_MODE_2D,t):(this.getMap()&&(this._unbindMap(),this.get("map").getOverlayManager().remove(this.getId()),this._mapbox=null),this.set("map",t),t&&(this._mapbox=t.getMapbox(),this._bindMap(t),t.getOverlayManager().add(this)))},e.prototype._switchTo=function(t,e){t===s.RENDER_MODE_GL?(a.switchParts(this,this,p,"GL"),this.__renderMode=s.RENDER_MODE_GL,this._id=r.Mantle.guid(),this._layerIds=[]):(a.switchParts(this,l,p),this.__renderMode=s.RENDER_MODE_2D)},e.prototype._bindMapGL=function(t){var e=t.getMapModel();this.bindTo(["mapSystemProjection","padding","paddingOffset","renderMode","containerTopLeft"],e),this._renderModeListener=this.addListener("renderMode_changed",this._renderMode_changed.bind(this))},e.prototype._unbindMapGL=function(){this.unbind("mapSystemProjection"),this.unbind("padding"),this.unbind("paddingOffset"),this.unbind("renderMode"),this.unbind("containerTopLeft"),r.Mantle.Event.removeListener(this._renderModeListener)},e.prototype.setOverlayIdProperties=function(t){t.properties?t.properties.__overlayId=this._id:t.properties={__overlayId:this._id}},e.mixin=function(){e.mixed||(a.mixin(r.Mantle.OverlayView,e),e.mixed=!0)},e.mixed=!1,e}(r.Mantle.OverlayView);e.OverlayViewGL=u},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractShapeOverlayGL=void 0;var r=n(0),a=n(1),s=n(2),p={solid:[1],shortdash:[2,1],shortdot:[1,1],shortdashdot:[2,1,1,1],shortdashdotdot:[2,1,1,1,1,1],dot:[1,2],dash:[3,2],longdash:[7,2],dashdot:[3,2,1,2],longdashdot:[7,2,1,2],longdashdotdot:[7,2,1,2,1,2]},l={line:{strokeWeight:"paint:line-width",strokeOpacity:"paint:line-opacity",strokeColor:"paint:line-color",strokeStyle:"paint:line-dasharray",strokeLineCap:"layout:line-cap",strokeLineJoin:"layout:line-join",visible:"layout:visibility"},fill:{fillColor:"paint:fill-color",fillOpacity:"paint:fill-opacity",visible:"layout:visibility"}},u=["setStyles","setVisible","setZIndex","draw"],c=r.Mantle.AbstractShapeOverlay.prototype,h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getStyle=function(t,e,n){if(l[t]&&l[t][e]){var o=l[t][e].split(":"),i=o[0],r=o[1];switch(e){case"visible":n=n?"visible":"none";break;case"strokeStyle":n=this._getDashStyle(n,this.get("strokeLineCap"),this.get("strokeWeight"));break;case"fillColor":n="none"===n?"rgba(0, 0, 0, 0)":n}return{which:i,key:r,value:n}}},e.prototype.remove=function(){this.removeAllLayer(),this.removeSource()},e.prototype.addGeojsonSource=function(e){t.prototype.addSource.call(this,"geojson",{type:a.FEATURE,geometry:{type:this.GEO_TYPE,coordinates:e}})},e.prototype.updateGeojsonSource=function(e){t.prototype.updateSource.call(this,{type:a.FEATURE,geometry:{type:this.GEO_TYPE,coordinates:e}})},e.prototype.addLayers=function(){var e=this;this.LAYER_TYPES.forEach(function(n){var o=e._getRefinedStyle(n);t.prototype.addLayer.call(e,n,o)})},e.prototype.updateStyle=function(e,n){var o=this;this.LAYER_TYPES.filter(function(t){return Boolean(l[t][e])}).forEach(function(i){t.prototype.updateLayerProperty.call(o,i,o.getStyle(i,e,n))})},e.prototype.rearrange=function(){this.removeAllLayer(),this.addLayers()},e.prototype.isReady=function(){var t=this,e=this.get("map");return!(!(e&&e.isGLReady())||this.PROPERTIES_NAME.some(function(e){return!t[e]}))},e.prototype.setStylesGL=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var o=this.PROPERTIES_NAME||[],i=this;if("string"==typeof t){var a=t,s=e[0];if("zIndex"===a)this.setZIndex(s);else{if(-1!==o.indexOf(a))throw new Error("The '"+a+"' is not style property.");this.set(a,s),this.updateStyle(a,s)}}else r.Mantle.forEach(t,function(t,e){i.setStyles(e,t)})},e.prototype.setVisibleGL=function(t){var e=this;this.set("visible",t),this._layerIds.forEach(function(n){e.updateStyle("visible",t)})},e.prototype.setZIndexGL=function(t){if(!(t<0||this.get("zIndex")===t)){var e=this.get("map"),n=e&&e.getOverlayManager();this.set("zIndex",t),n&&n.has(this.getId())&&n.update(this.getId())}},e.prototype.drawGL=function(){if(this.isReady()){var t=this._getCoordinates();this.hasSource()?this.updateGeojsonSource(t):(this.addGeojsonSource(t),this.addLayers())}},e.prototype._switchTo=function(t,e){var n=this,o=e||this.getMap(),i=this._getOptions();t===a.RENDER_MODE_GL?(this.setMap(null),s.switchParts(this,this,u,"GL"),r.Mantle.OverlayView.prototype._switchTo.apply(this,[t,i]),o.isGLReady()&&o.getOverlayManager()?(this.setMap(o),this.setOptions(i)):o.addListenerOnce("glReady",function(){n.setMap(o),n.setOptions(n.getOptions())})):(this.setMap(null),s.switchParts(this,c,u),r.Mantle.OverlayView.prototype._switchTo.apply(this,[t,i]),this.setMap(o),this.setOptions(i),this._initEvent())},e.prototype._getCoordinates=function(){throw new Error("must implements")},e.prototype._getOptions=function(){var t=this,e={};return Object.keys(this.DEFAULT_OPTIONS).forEach(function(n){"map"!==n&&(e[n]=t.get(n))}),e},e.prototype._getRefinedStyle=function(t){var e={layout:{},__layout:{},paint:{},__paint:{}};for(var n in this.DEFAULT_OPTIONS)if(Object.prototype.hasOwnProperty.call(this.DEFAULT_OPTIONS,n)){var o=this.getStyle(t,n,this.get(n));if(!o)continue;o.value&&(e[o.which][o.key]=o.value),e["__"+o.which][o.key]=o.value}return e},e.prototype._getDashStyle=function(t,e,n){if(Array.isArray(t)){var o=[];return r.Mantle.forEach(t,function(t){o.push(t/(n||1))}),o}for(var i=[],a=p[t]||p.solid,s=0,l=a.length,u=void 0;s<l;s++)u=a[s],e&&l>1&&(s%2==0?u=1===u?0:u:u*=2),i[s]=u;return i.length<2&&(i=null),i},e.mixin=function(){e.mixed||(s.mixin(r.Mantle.AbstractShapeOverlay,e),r.Mantle.AbstractShapeOverlay.prototype._switchTo=e.prototype._switchTo,e.mixed=!0)},e.mixed=!1,e}(r.Mantle.AbstractShapeOverlay);e.AbstractShapeOverlayGL=h},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.InfoWindowGL=void 0;var r=n(0),a=n(2),s=n(1),p=["_panToVisible"],l=r.Mantle.InfoWindow.prototype,u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onRenderModeChanged=function(t,e){if(void 0===e&&(e=void 0),t!==this.__renderMode&&(this.__renderMode||t!==s.RENDER_MODE_2D))if(t===s.RENDER_MODE_GL)for(var n=0,o=p;n<o.length;n++){var i=o[n];this[i]=this[i+"GL"]}else for(var r=0,a=p;r<a.length;r++){var u=a[r];l[u]&&(this[u]=l[u])}},e.prototype._panToVisibleGL=function(){if(this.getMap()){var t=this.getMap();if(!t.getMapAction().isTranRunning()){var e=t.getMapModel(),n=this.getProjection(),o=n.fromCoordToOffset(t.getCenter()),i=t.getSize(),a=this._boundary,s=e.get("containerTopLeft"),p=r.Point(0,0),l=s.x+a.x,u=s.y+a.y,c=s.x+a.x+a.w,h=s.y+a.y+a.h,d=l<0,f=u<0,y=c>i.width,_=h>i.height;if(d&&!y?p.x+=l-20:!d&&y&&(p.x+=c-i.width+20),f&&!_?p.y+=u-20:!f&&_&&(p.y+=h-i.height+20),0!==p.x||0!==p.y){p.y>0&&(p.y+=this._iconAnchor.y);var M=t.getTilt(),g=t.getRotation();if(0===M&&0===g)o.add(p),t.panTo(n.fromOffsetToCoord(o),{duration:200});else{var v=this.getPosition(),m=i.div(2,2),E=n.fromCoordToOffset(v);E.add(p.mul(-1,-1)),E.sub(new r.Point(m.width,m.height)),t.panTo(v,{duration:200,offset:E})}}}}},e.mixin=function(){e.mixed||(a.mixin(r.Mantle.InfoWindow,e),r.Mantle.InfoWindow.prototype.switchTo=e.prototype._onRenderModeChanged,e.mixed=!0)},e.mixed=!1,e}(r.Mantle.InfoWindow);e.InfoWindowGL=u},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.PolygonGL=void 0;var r=n(0),a=n(1),s=n(2),p=["simplifyLevel_changed"],l=r.Mantle.Polygon.prototype,u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.drawGL=function(){if(this.isReady()){var t=this._getCoordinates();t[0]&&2===t[0].length?(this.GEO_TYPE=a.LINE_STRING,t=t[0]):this.GEO_TYPE=this.getGeometryType(),this.hasSource()?this.updateGeojsonSource(t):(this.addGeojsonSource(t),this.addLayers())}},e.prototype._onRenderModeChanged=function(e,n){void 0===n&&(n=void 0),e===this.__renderMode||!this.__renderMode&&e===a.RENDER_MODE_2D||(e===a.RENDER_MODE_GL?(s.switchParts(this,this,p,"GL"),this.GEO_TYPE=this.getGeometryType(),this.LAYER_TYPES=["fill","line"]):(s.switchParts(this,l,p),delete this.GEO_TYPE,delete this.LAYER_TYPES),t.prototype._switchTo.call(this,e,n))},e.prototype._getCoordinates=function(){if(this.GEO_TYPE===a.MULTI_POLYGON)return this._raw.geometry.coordinates;for(var t=this.getPaths().getArray().map(function(t){return t.getArray().map(function(t){return[t.x,t.y]})}),e=t.length,n=0;n<e;n++){var o=t[n],i=o[0],r=o[o.length-1];o.length>2&&(i[0]!==r[0]||i[1]!==r[1])&&o.push(o[0]),3!==o.length||i[0]!==r[0]&&i[1]!==r[1]||o.pop()}return t},e.prototype.getGeometryType=function(){return this._raw&&this._raw.geometry?this._raw.geometry.type:a.POLYGON},e.prototype.simplifyLevel_changedGL=function(){},e.mixin=function(){e.mixed||(s.mixin(r.Mantle.Polygon,e),r.Mantle.Polygon.prototype.switchTo=e.prototype._onRenderModeChanged,r.Mantle.Polygon.prototype.drawGL=e.prototype.drawGL,r.Mantle.Polygon.prototype._getCoordinates=e.prototype._getCoordinates,e.mixed=!0)},e.mixed=!1,e}(r.Mantle.Polygon);e.PolygonGL=u},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.PolylineGL=void 0;var r=n(0),a=n(1),s=n(2),p=["simplifyLevel_changed"],l=r.Mantle.Polyline.prototype,u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onRenderModeChanged=function(e,n){void 0===n&&(n=void 0),e===this.__renderMode||!this.__renderMode&&e===a.RENDER_MODE_2D||(e===a.RENDER_MODE_GL?(s.switchParts(this,this,p,"GL"),this.GEO_TYPE=a.LINE_STRING,this.LAYER_TYPES=["line"]):(s.switchParts(this,l,p),delete this.GEO_TYPE,delete this.LAYER_TYPES),t.prototype._switchTo.call(this,e,n))},e.prototype._getCoordinates=function(){return this.getPath().getArray().map(function(t){var e=t;return[e.x,e.y]})},e.prototype._simplifyLevel_changedGL=function(){},e.mixin=function(){e.mixed||(s.mixin(r.Mantle.Polyline,e),r.Mantle.Polyline.prototype.switchTo=e.prototype._onRenderModeChanged,r.Mantle.Polyline.prototype._getCoordinates=e.prototype._getCoordinates,e.mixed=!0)},e.mixed=!1,e}(r.Mantle.Polyline);e.PolylineGL=u},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CircleGL=void 0;var r=n(0),a=n(1),s=n(2),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onRenderModeChanged=function(e,n){void 0===n&&(n=void 0),e===this.__renderMode||!this.__renderMode&&e===a.RENDER_MODE_2D||(e===a.RENDER_MODE_GL?(this.GEO_TYPE=a.POLYGON,this.LAYER_TYPES=["fill","line"]):(delete this.GEO_TYPE,delete this.LAYER_TYPES),t.prototype._switchTo.call(this,e,n))},e.prototype._getCoordinates=function(){var t=[],e=this.getRadius(),n=s.getCircularCoordinates(this.getCenter(),e,e,64);return t.push(n),t},e.mixin=function(){e.mixed||(s.mixin(r.Mantle.Circle,e),r.Mantle.Circle.prototype.switchTo=e.prototype._onRenderModeChanged,r.Mantle.Circle.prototype._getCoordinates=e.prototype._getCoordinates,e.mixed=!0)},e.mixed=!1,e}(r.Mantle.Circle);e.CircleGL=p},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.EllipseGL=void 0;var r=n(0),a=n(1),s=n(2),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onRenderModeChanged=function(e,n){void 0===n&&(n=void 0),e===this.__renderMode||!this.__renderMode&&e===a.RENDER_MODE_2D||(e===a.RENDER_MODE_GL?(this.GEO_TYPE=a.POLYGON,this.LAYER_TYPES=["fill","line"]):(delete this.GEO_TYPE,delete this.LAYER_TYPES),t.prototype._switchTo.call(this,e,n))},e.prototype._getCoordinates=function(){var t=[],e=this.getBounds(),n=(e.minX()+e.maxX())/2,o=(e.minY()+e.maxY())/2,i=new r.Mantle.LatLng(e.maxY(),n),a=new r.Mantle.LatLng(o,e.minX()),p=new r.Mantle.LatLng(o,n),l=s.getDistance(a,p),u=s.getDistance(i,p),c=s.getCircularCoordinates(p,l,u,64);return t.push(c),t},e.mixin=function(){e.mixed||(s.mixin(r.Mantle.Ellipse,e),r.Mantle.Ellipse.prototype.switchTo=e.prototype._onRenderModeChanged,r.Mantle.Ellipse.prototype._getCoordinates=e.prototype._getCoordinates,e.mixed=!0)},e.mixed=!1,e}(r.Mantle.Ellipse);e.EllipseGL=p},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.RectangleGL=void 0;var r=n(0),a=n(1),s=n(2),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onRenderModeChanged=function(e,n){void 0===n&&(n=void 0),e===this.__renderMode||!this.__renderMode&&e===a.RENDER_MODE_2D||(e===a.RENDER_MODE_GL?(this.GEO_TYPE=a.POLYGON,this.LAYER_TYPES=["fill","line"]):(delete this.GEO_TYPE,delete this.LAYER_TYPES),t.prototype._switchTo.call(this,e,n))},e.prototype._getCoordinates=function(){var t=[],e=this.getBounds(),n=[[e.minX(),e.minY()],[e.maxX(),e.minY()],[e.maxX(),e.maxY()],[e.minX(),e.maxY()]];return n.push(n[0]),t.push(n),t},e.mixin=function(){e.mixed||(s.mixin(r.Mantle.Rectangle,e),r.Mantle.Rectangle.prototype.switchTo=e.prototype._onRenderModeChanged,r.Mantle.Rectangle.prototype._getCoordinates=e.prototype._getCoordinates,e.mixed=!0)},e.mixed=!1,e}(r.Mantle.Rectangle);e.RectangleGL=p},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Layer=void 0;var r=n(0),a=n(2),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.setMap=function(t){var e=this.getMap();if(t!==e){if(this._beforeSetMap(t),t){this.map=t;var n=this.getLayerType(),o=n.getMapTypeOptions?n.getMapTypeOptions():null;o&&(o.map=t),this._addToMap(t)}else e&&this._destroy();return this.set("map",t),this._afterSetMap(t),!0}},e.prototype.refresh=function(t){},e.prototype._destroy=function(){var t=this.getMap();if(t)return t.layers.set(this.name,null),t.set(this.name+"Layer",null),this.refreshTileMap(),this.set("map",null),this.map=null,delete this.map,!1},e.prototype._addToMap=function(t){t.layers.set(this.name,this),t.set(this.name+"Layer",this),this.refreshTileMap()},e.prototype.refreshTileMap=function(){if(this.map){var t=this.map.getMapModel();t&&t.refreshTiles()}},e.mixin=function(){e.mixed||(a.mixin(r.Mantle.Layer,e),r.Mantle.Layer.prototype.setMap=e.prototype.setMap,r.Mantle.Layer.prototype.refresh=e.prototype.refresh,r.Mantle.Layer.prototype._destroy=e.prototype._destroy,r.Mantle.Layer.prototype._addToMap=e.prototype._addToMap,r.Mantle.CadastralLayer.prototype._afterSetMap=r.Mantle.noop,r.Mantle.CadastralLayer.prototype._destroy=e.prototype._destroy,e.mixed=!0)},e.mixed=!1,e}(r.Mantle.Layer);e.Layer=s},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.MountainLayer=void 0;var r=n(0),a=function(t){function e(e){var n=t.call(this,e)||this,o=r.Mantle.extend({zIndex:4,overlayMap:!0},e);return o.useStyleMap||!0?(r.Mantle.LabelLayer.apply(n,["mountain",r.Mantle.NaverStyleMapTypeOptions.getMountainLayer(),o]),n):(r.Mantle.LabelLayer.apply(n,["mountain",r.Mantle.NaverImagePaneTypeOption.getMountainLayer(),o]),n)}return i(e,t),e}(r.Mantle.LabelLayer);e.MountainLayer=a},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CctvLayer=void 0;var r=n(0),a=function(t){function e(e){var n=t.call(this,e)||this,o=r.Mantle.extend({zIndex:11,overlayMap:!0},e);return o.useStyleMap||!0?(r.Mantle.LabelLayer.apply(n,["cctv",r.Mantle.NaverStyleMapTypeOptions.getCctvLayer(),o]),n):(r.Mantle.LabelLayer.apply(n,["cctv",r.Mantle.NaverImagePaneTypeOption.getCctvLayer(),o]),n)}return i(e,t),e}(r.Mantle.LabelLayer);e.CctvLayer=a},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.MapAttributionControl=void 0;var r=n(0),a=n(2),s=function(t){function e(e){var n=t.call(this,e)||this;return n.mapListeners=[],n.providersHash={},n.prepareDOM(n.getElement()),n}return i(e,t),e.prototype._beforeSetMap=function(t){this.map&&!t&&this.unlistenMapEvents()},e.prototype._afterSetMap=function(t){t&&(this.initProviders(),this.listenMapEvents(),this.updateDisplayList())},e.prototype.prepareDOM=function(t){t.style.cssText+="padding: 1px 5px; height: 16px; font-family: Apple SD Gothic Neo,Apple SD Gothic,sans-serif; border-radius: 2px 0 0 0; background: rgba(255, 255, 255, 0.5); box-sizing: content-box !important; user-select: none;",this.attributionElement=r.Mantle.DOM.createElement("div","float: left; display: inline-block; font-size: 10px; padding: 1px 7px 1px 3px;"),this.scaleElement=r.Mantle.DOM.createElement("div","font-size: 0; padding: 2px; float: right; display: block;"),this.scaleDistanceSpan=r.Mantle.DOM.createElement("span","font-size: 10px; line-height: 10px; margin-right: 3px; color: #000; text-align: center;"),this.scaleFigureSpan=r.Mantle.DOM.createElement("span","display: inline-block; margin: 2px 3px 0 0; width: 50px; height: 6px; border: 2px solid #000; border-top: 0; box-sizing: border-box; vertical-align: top; transition: width 0.2s ease-in-out;"),this.scaleElement.appendChild(this.scaleDistanceSpan),this.scaleElement.appendChild(this.scaleFigureSpan),t.appendChild(this.scaleElement),t.appendChild(this.attributionElement)},e.prototype.listenMapEvents=function(){this.mapListeners=[r.Mantle.Event.addListener(this.map,"mapType_changed",this.onMapTypeChanged.bind(this)),r.Mantle.Event.addListener(this.map,"addLayer",this.onAddLayer.bind(this)),r.Mantle.Event.addListener(this.map,"removeLayer",this.onRemoveLayer.bind(this)),r.Mantle.Event.addListener(this.map.getMapAction(),"idle",this.onIdle.bind(this))]},e.prototype.unlistenMapEvents=function(){r.Mantle.Event.removeListener(this.mapListeners)},e.prototype.updateDisplayList=function(){this.updateAttributions(),this.updateScale()},e.prototype.initProviders=function(){var t=this.map.getMapType().getOptions().provider;this.providersHash.basemap=t,this.checkValidation(this.providersHash.basemap)},e.prototype.getProviders=function(){var t=[];return r.Mantle.forEach(this.providersHash,function(e){r.Mantle.forEach(e,function(e){Object.prototype.hasOwnProperty.call(e,"validation")&&!e.validation||t.push(e)})}),t},e.prototype.updateAttributions=function(){this.attributionElement.innerHTML="\xa9&nbsp;";for(var t=this.getProviders(),e=t.length,n=0;n<e;n+=1){var o=t[n];if(o){var i=o.title,a=o.link,s=a?"<a href="+a+' target="_blank" style="color: inherit; text-decoration: none;">'+i+"</a>":i;"OpenStreetMap"===i&&(s+="&nbsp;contributors"),n<e-1&&(s+="&nbsp;/&nbsp;");var p=r.Mantle.DOM.createElement("span");p.innerHTML=s,this.attributionElement.appendChild(p)}}},e.prototype.onMapTypeChanged=function(t){if(this.map){var e=t.getOptions().provider;this.providersHash.basemap=e,this.checkValidation(this.providersHash.basemap),this.updateAttributions()}},e.prototype.onAddLayer=function(t){var e=t.get("name");if(!this.providersHash[e]){var n=t.getLayerType().provider;n&&(this.providersHash[e]=n,this.updateAttributions())}},e.prototype.onRemoveLayer=function(t){this.providersHash[t]&&(this.providersHash[t]=null,delete this.providersHash[t],this.updateAttributions())},e.prototype.onIdle=function(){var t=this;r.Mantle.forEach(this.providersHash,function(e){t.checkValidation(e)}),this.updateDisplayList()},e.prototype.checkValidation=function(t){var e=this.map.getBounds();r.Mantle.forEach(t,function(t){var n=!1;if(t.bounds){t.validation=!1;for(var o=Array.isArray(t.bounds)?t.bounds:[t.bounds],i=o.length,a=0;a<i;a+=1){var s=null,p=o[a];if(s=p instanceof r.Mantle.LatLngBounds?r.Mantle.PointBounds.bounds(p.getSW(),p.getNE()):p,n=t.exclude?!s.hasBounds(e):s.intersects(e))return void(t.validation=n)}}else t.validation=!0})},e.prototype.updateScale=function(){if(this.map){var t=this.map.getProjection(),e=this.map.getElement().clientHeight/2,n=t.fromOffsetToCoord(new r.Mantle.Point(0,e)),o=t.fromOffsetToCoord(new r.Mantle.Point(100,e));if(n&&o){"none"===this.scaleElement.style.display&&(this.scaleElement.style.display="block");var i=a.getDistance(n,o);if(i<1)this.scaleElement.style.display="none";else{var s=this.getRoundNum(i),p=Math.round(s/i*100);this.scaleDistanceSpan.textContent=""+this.addUnitToDistance(s),this.scaleFigureSpan.style.width=p+"px"}}}},e.prototype.getDecimalRoundNum=function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e},e.prototype.getRoundNum=function(t){var e=Math.pow(10,(""+Math.floor(t)).length-1),n=t/e;return e*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:this.getDecimalRoundNum(n))},e.prototype.addUnitToDistance=function(t){var e="m";return t>=1e3&&(t/=1e3,e="km"),""+t+e},e}(r.Mantle.CustomControl);e.MapAttributionControl=s,r.Mantle.MapAttributionControl=s},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.MapAction=void 0;var r=n(0),a=n(2),s=new(n(45).Lethargy)(7,10,.05),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onWheel=function(t){if(this.handleEvent(t,"mousewheel"),!this.get("scrollWheel")||r.DOMEvent.isTouchStarted())return!1;if(t.stop(),s.check(t)){var e=Date.now(),n=null!==this._wheelTime&&e-this._wheelTime<100,o="wheelDeltaY"in t?t.wheelDeltaY:"wheelDelta"in t?t.wheelDelta:null,i=null!==o&&Math.abs(o)<=6;if(!n&&!i){this._wheelTime=e;var a=r.DOMEvent.getWheelDelta(t).deltaY>0?1:-1,p=this._getZoomOrigin(t);this.stopTransition(),this.zoomBy(a,p,!0)}}},e.mixin=function(){e.mixed||(a.mixin(r.Mantle.MapAction,e),r.Mantle.MapAction.prototype._onWheel=e.prototype._onWheel,e.mixed=!0)},e.mixed=!1,e}(r.Mantle.MapAction);e.MapAction=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Lethargy=void 0;var o=function(){function t(t,e,n,o){var i=this;this.stability=8,this.sensitivity=100,this.tolerance=1.1,this.delay=150,this.stability=null!=t?Math.abs(t):8,this.sensitivity=null!=e?1+Math.abs(e):100,this.tolerance=null!=n?1+Math.abs(n):1.1,this.delay=null!=o?o:150;var r=function(){for(var t=[],e=2*i.stability,n=1;1<=e?n<=e:n>=e;1<=e?n++:n--)t.push(null);return t};this.lastUpDeltas=r(),this.lastDownDeltas=r(),this.deltasTimestamp=r()}return t.prototype.check=function(t){var e;return null!=(t=t.originalEvent||t).wheelDelta?e=t.wheelDelta:null!=t.deltaY?e=-40*t.deltaY:null==t.detail&&0!==t.detail||(e=-40*t.detail),this.deltasTimestamp.push(Date.now()),this.deltasTimestamp.shift(),e>0?(this.lastUpDeltas.push(e),this.lastUpDeltas.shift(),this.isInertia(1)):(this.lastDownDeltas.push(e),this.lastDownDeltas.shift(),this.isInertia(-1))},t.prototype.isInertia=function(t){var e=-1===t?this.lastDownDeltas:this.lastUpDeltas;if(null===e[0])return t;if(this.deltasTimestamp[2*this.stability-2]+this.delay>Date.now()&&e[0]===e[2*this.stability-1])return!1;var n=e.slice(0,this.stability),o=e.slice(this.stability,2*this.stability),i=n.reduce(function(t,e){return t+e}),r=o.reduce(function(t,e){return t+e}),a=i/n.length,s=r/o.length;return Math.abs(a)<Math.abs(s*this.tolerance)&&this.sensitivity<Math.abs(s)&&t},t}();e.Lethargy=o},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.MarkerGroup=void 0;var a=n(1),s=n(0),p=n(47),l=function(t){function e(e){var n=t.call(this)||this;return n.GEO_TYPE="MarkerGroup",n.EVENT_LIST=["click","dblclick","mousedown","mousemove","mouseup"],n.mapboxImageIds=[],n.listeners=[],n.DEFAULT_OPTIONS={map:null,featureCollection:{type:a.FEATURE_COLLECTION,features:[]},icon:null,clickable:!0,zIndex:0},n.setOptions(s.Mantle.extend({},n.DEFAULT_OPTIONS,e),!0),n.setMap(e.map||null),n}return i(e,t),e.prototype.setOptions=function(t,e){var n=this;if(void 0===e&&(e=!1),"string"==typeof t){var o=t,i=arguments[1];"zIndex"===o?this.setZIndex(i):this.set(o,i)}else s.Mantle.forEach(t,function(t,o){"map"!==o&&n.set(o,t,e)}),t.map&&!e&&this.setMap(t.map)},e.prototype.setMap=function(t){var e=this;t&&t.getMapModel()||(t=null),t&&t.get("renderMode")===a.RENDER_MODE_GL&&!t.isGLReady()?t.addListenerOnce("glReady",function(){e.setMap(t)}):(this.getMap()&&(this.get("ef_overlay")&&this.getMap().getMapAction().clearOverlayPanePosition(),this.onRemove(),this._unbindMap(),this.getMap().get("renderMode")===a.RENDER_MODE_GL&&this.getMap().getOverlayManager().remove(this.getId()),s.Mantle.Event.trigger(this,"removed")),this.set("map",t),t&&(this._bindMap(t),this.onAdd(),s.Mantle.Event.trigger(this,"added"),this.draw(),s.Mantle.Event.trigger(this,"draw")))},e.prototype.setVisible=function(t){if(this.set("visible",t),this.get("map")){var e=this.get("map");if(e.get("renderMode")===a.RENDER_MODE_2D)s.Mantle.forEach(this.get("markers"),function(e){e.setOptions("visible",t)});else e.getMapbox().setLayoutProperty(this.getLayerId(),"visibility",t?"visible":"none")}},e.prototype.getVisible=function(){return this.get("visible")},e.prototype.setZIndex=function(t){if(!(t<0||this.get("zIndex")===t)){var e=this.get("map"),n=e&&e.getOverlayManager();this.set("zIndex",t),n&&n.has(this.getId())&&n.update(this.getId())}},e.prototype.setClickable=function(t){this.set("clickable",t)},e.prototype.getClickable=function(){return this.get("clickable")},e.prototype.getId=function(){return this.mapboxSourceId},e.prototype.getLayerIds=function(){return[this.getLayerId(this.mapboxSourceId)]},e.prototype.getLayerId=function(t){return(t||this.mapboxSourceId)+"-marker-group"},e.prototype.remove=function(){},e.prototype.rearrange=function(){if(this.getMap()){var t=this.getMap().getMapbox(),e=this.getLayerId(),n=t.getLayer(e).serialize();t.removeLayer(this.getLayerId()),t.addLayer(n,this.get("refLayerId"))}},e.prototype.onAdd=function(){var t=this,e=this.getMap(),n=this.get("stylingFunction"),o=this.get("featureCollection").features;if(o)if(e.get("renderMode")===a.RENDER_MODE_2D){var i=[];s.Mantle.forEach(o,function(e){var n=t.createMantleSimpleMarker(e);i.push(n)}),this.set("markers",i)}else{var r=e.getMapbox(),p=s.Mantle.guid(),l=this.getLayerId(p);this.mapboxSourceId=p;var u=this.createMapboxFeatures(o);Promise.all(u).then(function(){e.getOverlayManager().add(t),r.addSource(p,{type:"geojson",data:{type:a.FEATURE_COLLECTION,features:o}}),r.addLayer({id:l,type:"symbol",source:p,layout:{"icon-allow-overlap":!0,"icon-size":["get","__iconSize"],"icon-image":n?["get","__iconImage"]:t.mapboxImageIds[0]}},t.get("refLayerId")),e.getMapAction().addFilterLayer(l)})}},e.prototype.onRemove=function(){var t=this.getMap(),e=t.getMapbox();if(s.Mantle.Event.removeListener(this.listeners),t.get("renderMode")!==a.RENDER_MODE_2D){var n=this.getLayerId(this.mapboxSourceId);t.getMapAction().removeFilterLayer(n),e.removeLayer(n),e.removeSource(this.mapboxSourceId),s.Mantle.forEach(this.mapboxImageIds,function(t){e.removeImage(t)})}else s.Mantle.forEach(this.get("markers"),function(t){t.setMap(null)})},e.prototype.draw=function(){},e.prototype.createMantleSimpleMarker=function(t){var e=this,n=new s.Mantle.SimpleMarker({map:this.getMap()||null,position:t.geometry.coordinates,icon:this.get("stylingFunction")?this.get("stylingFunction")(t):this.get("icon"),clickable:this.get("clickable"),__raw:t});return this.EVENT_LIST.forEach(function(t){e.listeners.push(n.addListener(t,function(n){s.Mantle.Event.trigger(e,t,e.getEventObject(n))}))}),n},e.prototype.createMapboxFeatures=function(t){var e=this,n=[],o=this.get("stylingFunction"),i=this.getMap().getMapbox(),r=function(t,n){i.hasImage(t)||(i.addImage(t,n),e.mapboxImageIds.push(t))};if(o)s.Mantle.forEach(t,function(t){var i=e.refineIconOptions(o(t)),a=i.url,s=i.size,l=i.scaledSize,u=i.origin,c=i.anchor;n.push(p.SpriteImageLoader.loadImage({url:a,size:s,scaledSize:l,origin:u}).then(function(n){var o=n.key,i=n.retina,a=n.image;r(o,a),t.properties.__iconImage=o,t.properties.__iconAnchor=c,t.properties.__iconSize=i?.5:1,t.properties.__overlayId=e.getId()}))});else{var a=this.refineIconOptions(this.get("icon"));n.push(p.SpriteImageLoader.loadImage(a).then(function(n){var o=n.key,i=n.retina,a=n.image;r(o,a),s.Mantle.forEach(t,function(t){t.properties.__iconSize=i?.5:1,t.properties.__overlayId=e.getId()})}))}return n},e.prototype.refineIconOptions=function(t){var e=t.url,n=t.size,o=t.scaledSize,i=t.origin,r=t.anchor;return{url:e,scaledSize:o instanceof s.Mantle.Size?[o.width,o.height]:o,size:n instanceof s.Mantle.Size?[n.width,n.height]:n,origin:i instanceof s.Mantle.Point?[i.x,i.y]:i,anchor:r}},e.prototype.iconToMapboxSymbolLayout=function(t){var e=t.anchor,n="center",o=[0,0];if(e instanceof s.Mantle.Point||e instanceof Array){var i=s.Mantle.box(e);o=[i.x,i.y]}else switch(e){case a.POSITION.CENTER:n="center";break;case a.POSITION.TOP_LEFT:case a.POSITION.LEFT_TOP:n="top-left";break;case a.POSITION.TOP_CENTER:n="top";break;case a.POSITION.TOP_RIGHT:case a.POSITION.RIGHT_TOP:n="top-right";break;case a.POSITION.LEFT_CENTER:n="left";break;case a.POSITION.LEFT_BOTTOM:case a.POSITION.BOTTOM_LEFT:n="bottom-left";break;case a.POSITION.RIGHT_CENTER:n="right";break;case a.POSITION.RIGHT_BOTTOM:case a.POSITION.BOTTOM_RIGHT:n="bottom-right";break;case a.POSITION.BOTTOM_CENTER:n="bottom";break;default:n="center"}return{"icon-allow-overlap":!0,"icon-anchor":n,"icon-offset":o}},e.prototype.getEventObject=function(t){return r(r({},t),{data:t.overlay?t.overlay.__raw:null})},e.prototype.featureCollection_changed=function(t){var e=this,n=this.getMap(),o=t.features;if(n&&o)if(n.get("renderMode")===a.RENDER_MODE_2D){var i=[],r=[];s.Mantle.forEach(this.get("markers"),function(t){var e=t.__raw.id;e&&o.findIndex(function(t){return t.id&&t.id===e})>=0?i.push(t):t.setMap(null)}),s.Mantle.forEach(o,function(t){var n=t.id;if(!n||!i.findIndex(function(t){return t.id&&t.id===n})){var o=e.createMantleSimpleMarker(t);r.push(o)}}),this.set("markers",i.concat(r))}else{var p=this.createMapboxFeatures(o);Promise.all(p).then(function(){n.getMapbox().getSource(e.mapboxSourceId).setData(t)})}},e}(s.Mantle.OverlayView);e.MarkerGroup=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpriteImageLoader=void 0;var o=n(3),i=function(){function t(){this.cache={}}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.loadImage=function(t){return this.getInstance().loadImage(t)},t.prototype.loadImage=function(t){var e=this,n=this.generateImageKey(t),i=t.url,r=t.origin,a=t.size,s=t.scaledSize;return new Promise(function(t,p){o.FileLoader.loadImage(i).then(function(o){if(e.hasImage(n)){var i=e.getImage(n),l=i.image,u=i.retina;t({key:n,retina:u,image:l})}else{var c=document.createElement("canvas"),h=c.getContext("2d"),d=o.width,f=o.height,y=s?[d/s[0],f/s[1]]:[1,1],_=y[0]>1&&y[1]>1;c.width=a[0]*y[0],c.height=a[1]*y[1],h.drawImage(o,r[0]*y[0],r[1]*y[1],a[0]*y[0],a[1]*y[1],0,0,a[0]*y[0],a[1]*y[1]);var M=document.createElement("img");M.src=c.toDataURL();var g={image:M,retina:_};e.setImage(n,g),M.onload=function(){t({key:n,retina:_,image:M})},M.onerror=function(t){p(t)}}})})},t.prototype.hasImage=function(t){return Boolean(this.cache[t])},t.prototype.generateImageKey=function(t){var e=t.url,n=t.origin,o=t.size;return e+"_"+n[0]+"/"+n[1]+"_"+o[0]+"/"+o[1]},t.prototype.getImage=function(t){return this.cache[t]},t.prototype.setImage=function(t,e){this.cache[t]=e},t}();e.SpriteImageLoader=i},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleMarker=void 0;var r=n(1),a=n(0),s=function(t){function e(e){var n=t.call(this)||this;return n.DOM_EVENTS=["click","mousedown","mouseup","contextmenu"],n._listeners=[],n.DEFAULT_OPTIONS={icon:null,position:null,map:null,visible:!0,zIndex:0,clickable:!0},n._element=n.createElement(),n._offset=new a.Mantle.Point(0,0),n.setOptions(a.Mantle.extend({},n.DEFAULT_OPTIONS,e)),n}return i(e,t),e.prototype.setOptions=function(t,e){var n=this;if("string"==typeof t){var o=t,i="set"+a.Mantle.capitalize(o);this[i]?this[i](e):this.set(o,e)}else a.Mantle.forEach(t,function(t,e){"map"!==e&&n.setOptions(e,t)}),t.map&&this.setMap(t.map)},e.prototype.setPosition=function(t){t&&(this._position=a.Mantle.box(t),this.draw())},e.prototype.getPosition=function(){return this._position},e.prototype.setIcon=function(t){var e=a.Mantle.boxToIcon(t||null),n=e.size,o=e.scaledSize,i=e.anchor;(n||o)&&(e.anchor=a.Mantle.calcAnchorPosition(n||o,i)),this._icon=e,this.update(this._icon)},e.prototype.getIcon=function(){return this._icon},e.prototype.setVisible=function(t){this._visible!==t&&(this._visible=t,a.Mantle.DOM.visible(this._element,t))},e.prototype.getVisible=function(){return this._visible},e.prototype.setZIndex=function(t){this._zIndex=t,a.Mantle.DOM.setZIndex(this._element,t)},e.prototype.getZIndex=function(){return this._zIndex},e.prototype.draw=function(){if(this.getMap()){var t=this.getProjection(),e=this.getPosition(),n=t.fromCoordToOffset(e),o=new a.Mantle.Point(n.x-this._offset.x,n.y-this._offset.y);a.Mantle.DOM.setOffsetWithAnchor(this._element,o,this._icon?this._icon.anchor:0)}},e.prototype.onAdd=function(){this.getPanes().overlayImage.appendChild(this._element),this.addEventListener()},e.prototype.onRemove=function(){this.removeEventListener(),a.Mantle.DOM.removeElement(this._element)},e.prototype.createElement=function(){var t=document.createElement("div");return t.style.cssText="position:absolute;overflow:hidden;width:22px;height:35px;box-sizing:content-box !important",t},e.prototype.update=function(t){var e=t,n=e.url,o=e.scaledSize,i=e.size,r=e.origin,a=this._element,s="position:absolute;width:"+o.width+"px;height:"+o.height+"px;left:-"+r.x+"px;top:-"+r.y+"px;";a.style.width=i.width+"px",a.style.height=i.height+"px",a.innerHTML="<img src='"+n+"' style="+s+" crossorigin='anonymous' alt=''>"},e.prototype.addEventListener=function(){if(this._element)for(var t=this._element.childNodes[0],e=0,n=this.DOM_EVENTS.length,o=void 0;e<n;e+=1)o=this.DOM_EVENTS[e],this._listeners.push(a.Mantle.Event.addDOMListener(t,o,this.getListener(o)))},e.prototype.removeEventListener=function(){a.Mantle.Event.removeDOMListener(this._listeners),this._listeners=[]},e.prototype.getListener=function(t){var e=this;return function(n){if(e.map&&e.clickable){var o=a.Mantle.DOMEvent.fix(n),i=e.getPointerEvent(o),s=function(t,n){var o=t;switch(t){case"mousedown":e.__dp__={x:n.pageX,y:n.pageY};break;case"click":o=a.Mantle.Math.distance(e.__dp__,{x:n.pageX,y:n.pageY})<r.DRAG_THRESHOLD?e._getSingleClickType(n):null}return[void 0,o,void 0]}(t,o);a.Mantle.forEach(s,function(t){t&&a.Mantle.Event.trigger(e,t,i)})}}},e.prototype.getPointerEvent=function(t){var e=t.pos(),n=a.Mantle.Point(e.pageX,e.pageY),o=this.getProjection(),i=this.get("containerTopLeft"),r=this.getMapOffset(),s=a.Mantle.Point(n.x-r.x,n.y-r.y).sub(i),p=o.fromOffsetToPoint(s);return{offset:s,point:p,coord:o.fromPointToCoord(p),pointerEvent:t,domEvent:t,overlay:this}},e.prototype.getCursorState=function(t){return t=t||this.cursor,this.clickable?t||"pointer":"inherit"},e.prototype.clickable_changed=function(t){this._element&&(this._element.childNodes[0].__clickable=!!t,this.set("cursor",this.cursor))},e.prototype.cursor_changed=function(t){if(this._element){var e=this.getCursorState(t||"pointer"),n=this._element.childNodes[0];this._element.style.cursor="inherit",n.style.cursor=e}},e}(a.Mantle.OverlayView);e.SimpleMarker=s,a.Mantle.SimpleMarker=s}]);